<div class="space-y-6">
  <!-- Info Banner -->
  <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
    <div class="flex items-start gap-3">
      <svg class="h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
      </svg>
      <div>
        <p class="text-sm font-medium text-blue-800 dark:text-blue-300">Activity Log</p>
        <p class="text-sm text-blue-600 dark:text-blue-400">Track all actions performed by this agent. This log is for administrative purposes only.</p>
      </div>
    </div>
  </div>

  <!-- Filters -->
  <div class="flex flex-wrap gap-4 items-center">
    <div>
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mr-2">Category:</label>
      <select
        [value]="categoryFilter()"
        (change)="onCategoryChange($event)"
        class="rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 py-2 px-3 text-sm text-gray-900 dark:text-white focus:border-primary-500 focus:ring-1 focus:ring-primary-500">
        <option value="all">All Categories</option>
        <option value="member">Member Actions</option>
        <option value="collection">Collections</option>
        <option value="profile">Profile Updates</option>
        <option value="login">Login Activity</option>
      </select>
    </div>
    <div>
      <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mr-2">Period:</label>
      <select
        [value]="dateFilter()"
        (change)="onDateFilterChange($event)"
        class="rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 py-2 px-3 text-sm text-gray-900 dark:text-white focus:border-primary-500 focus:ring-1 focus:ring-primary-500">
        <option value="today">Today</option>
        <option value="last7days">Last 7 Days</option>
        <option value="last30days">Last 30 Days</option>
        <option value="thisMonth">This Month</option>
        <option value="all">All Time</option>
      </select>
    </div>
    <div class="ml-auto">
      <button
        type="button"
        (click)="exportActivityLog()"
        class="inline-flex items-center gap-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600">
        <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
        </svg>
        Export
      </button>
    </div>
  </div>

  @if (loading()) {
    <div class="flex justify-center items-center py-20">
      <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div>
    </div>
  } @else {
    <!-- Activity Timeline -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700">
      @if (filteredLogs().length === 0) {
        <div class="p-8 text-center">
          <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No activity found</h3>
          <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">No activity matches the selected filters.</p>
        </div>
      } @else {
        <div class="divide-y divide-gray-200 dark:divide-gray-700">
          @for (log of filteredLogs(); track log.id) {
            <div class="p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
              <div class="flex items-start gap-4">
                <!-- Icon -->
                <div class="flex-shrink-0 w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-lg">
                  {{ getCategoryIcon(log.category) }}
                </div>
                
                <!-- Content -->
                <div class="flex-1 min-w-0">
                  <div class="flex items-center gap-2 flex-wrap">
                    <p class="text-sm font-medium text-gray-900 dark:text-white">{{ log.action }}</p>
                    <span [class]="'inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ' + getCategoryBadgeClass(log.category)">
                      {{ log.category }}
                    </span>
                  </div>
                  <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">{{ log.description }}</p>
                  @if (log.details) {
                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1">{{ log.details }}</p>
                  }
                </div>
                
                <!-- Timestamp -->
                <div class="flex-shrink-0 text-right">
                  <p class="text-sm text-gray-500 dark:text-gray-400">{{ formatTimestamp(log.timestamp) }}</p>
                </div>
              </div>
            </div>
          }
        </div>

        <!-- Load More -->
        <div class="p-4 border-t border-gray-200 dark:border-gray-700 text-center">
          <button
            type="button"
            class="text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300">
            Load more activity...
          </button>
        </div>
      }
    </div>
  }
</div>
