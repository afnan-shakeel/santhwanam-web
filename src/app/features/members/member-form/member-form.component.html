<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <!-- Page Header -->
  <div class="mb-6">
    <div class="flex items-center gap-3 mb-1">
      <h1 class="text-xl font-semibold text-gray-900 dark:text-white">{{ pageTitle() }}</h1>
      @if (isEditMode()) {
        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400">
          Draft
        </span>
      }
    </div>
    <p class="text-sm text-gray-500 dark:text-gray-400">
      @if (isEditMode()) {
        Continue the registration process for this member.
      } @else {
        Complete all steps to register a new member.
      }
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
    <!-- Progress Stepper Sidebar -->
    <div class="lg:col-span-3">
      <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-5 sticky top-4">
        <h2 class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-4">Registration Progress</h2>
        <app-progress-stepper [steps]="steps()"></app-progress-stepper>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="lg:col-span-9">
      <div class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
        
        @if (loading()) {
          <div class="flex flex-col justify-center items-center py-16">
            <div class="h-10 w-10 rounded-full border-4 border-gray-200 border-t-primary animate-spin"></div>
            <p class="mt-4 text-sm text-gray-500 dark:text-gray-400">Loading member data...</p>
          </div>
        } @else {
          
          <!-- Step 1: Personal Details -->
          @if (currentStep() === 1) {
            <app-personal-details-step
              [memberId]="memberId()"
              [initialData]="memberData()"
              (saveDraft)="onSaveDraft($event)"
              (continue)="onContinueFromPersonalDetails($event)"
            ></app-personal-details-step>
          }

          <!-- Step 2: Nominees -->
          @if (currentStep() === 2) {
            <app-nominees-step
              [memberId]="memberId()!"
              (back)="onBackToPersonalDetails()"
              (continue)="onContinueFromNominees()"
            ></app-nominees-step>
          }

          <!-- Step 3: Documents & Payment -->
          @if (currentStep() === 3) {
            <app-documents-payment-step
              [memberId]="memberId()!"
              (back)="onBackToNominees()"
              (submit)="onSubmitRegistration()"
            ></app-documents-payment-step>
          }

        }
      </div>
    </div>
  </div>
</div>
