{
  "openapi": "3.0.3",
  "info": {
    "title": "Santhwanam API X",
    "version": "0.1.0",
    "description": "Minimal OpenAPI spec for IAM (permissions & roles)"
  },
  "servers": [
    {
      "url": "{baseUrl}",
      "description": "API base URL",
      "variables": {
        "baseUrl": {
          "default": "http://localhost:3000",
          "description": "Base URL (e.g., http://localhost:3000 or https://api.example.com)"
        }
      }
    }
  ],
  "security": [
    { "BearerAuth": [] }
  ],
  "paths": {
    "/api/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User login",
        "description": "Authenticates user with email and password. Returns JWT access token and full AuthContext with user info, permissions, scope, hierarchy, and roles.",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "password": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "accessToken": {
                      "type": "string",
                      "description": "JWT access token signed by the server"
                    },
                    "refreshToken": {
                      "type": ["string", "null"],
                      "description": "Optional refresh token from Supabase"
                    },
                    "expiresAt": {
                      "type": ["integer", "null"],
                      "description": "Optional expiry timestamp (Unix seconds)"
                    },
                    "authContext": {
                      "$ref": "#/components/schemas/AuthContext"
                    }
                  }
                }
              }
            }
          },
          "401": { "description": "Invalid credentials" }
        }
      }
    },
    "/api/auth/reset-password/request": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Request password reset",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email"],
                "properties": {
                  "email": { "type": "string", "format": "email" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Reset email sent" },
          "404": { "description": "User not found" }
        }
      }
    },
    "/api/auth/reset-password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Reset password",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["token", "newPassword"],
                "properties": {
                  "token": { "type": "string" },
                  "newPassword": { "type": "string", "minLength": 8 }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Password reset successful" },
          "400": { "description": "Invalid or expired token" }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Get current user context",
        "description": "Returns the full AuthContext for the authenticated user including user info, permissions, scope, hierarchy, and roles.",
        "responses": {
          "200": {
            "description": "AuthContext retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthContext"
                }
              }
            }
          },
          "401": { "description": "Not authenticated" }
        }
      }
    },
    "/api/auth/check-access": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Check resource access",
        "description": "Check if the current user has access to a specific resource based on their scope and hierarchy.",
        "parameters": [
          {
            "name": "resource",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "enum": ["member", "agent", "wallet"] },
            "description": "The type of resource to check access for"
          },
          {
            "name": "resourceId",
            "in": "query",
            "required": true,
            "schema": { "type": "string" },
            "description": "The ID of the specific resource"
          }
        ],
        "responses": {
          "200": {
            "description": "Access check result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AccessCheckResult"
                }
              }
            }
          },
          "400": { "description": "Missing required query parameters" }
        }
      }
    },
    "/api/iam/users/invite": {
      "post": {
        "tags": ["IAM - Users"],
        "summary": "Invite user",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email"],
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "firstName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "roles": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "roleId": { "type": "string" },
                        "scopeEntityType": { "type": "string", "enum": ["None", "Forum", "Area", "Unit", "Agent"] },
                        "scopeEntityId": { "type": "string" }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "User invited" }
        }
      }
    },
    "/api/iam/users/search": {
      "post": {
        "tags": ["IAM - Users"],
        "summary": "Search users",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Search results" }
        }
      }
    },
    "/api/iam/users/{id}": {
      "get": {
        "tags": ["IAM - Users"],
        "summary": "Get user by id",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": {
          "200": {
            "description": "User retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "userId": { "type": "string" },
                    "externalAuthId": { "type": "string" },
                    "email": { "type": "string", "format": "email" },
                    "firstName": { "type": ["string", "null"] },
                    "lastName": { "type": ["string", "null"] },
                    "isActive": { "type": "boolean" },
                    "userMetadata": { "type": ["object", "null"] },
                    "createdAt": { "type": "string", "format": "date-time" },
                    "lastSyncedAt": { "type": ["string", "null"], "format": "date-time" }
                  }
                }
              }
            }
          },
          "404": { "description": "User not found" }
        }
      },
      "patch": {
        "tags": ["IAM - Users"],
        "summary": "Update user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "firstName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "isActive": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "User updated" }
        }
      }
    },
    "/api/iam/users/{userId}/roles": {
      "post": {
        "tags": ["IAM - User Roles"],
        "summary": "Assign role to user",
        "description": "Assigns a role to a user with optional scope (Forum, Area, Unit, Agent). The role's scopeType must match the provided scopeEntityType.",
        "parameters": [
          { "name": "userId", "in": "path", "required": true, "schema": { "type": "string" }, "description": "User ID to assign role to" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["roleId"],
                "properties": {
                  "roleId": { 
                    "type": "string",
                    "description": "Role ID to assign"
                  },
                  "scopeEntityType": { 
                    "type": "string", 
                    "enum": ["None", "Forum", "Area", "Unit", "Agent"],
                    "description": "Type of entity this role is scoped to (must match role's scopeType)"
                  },
                  "scopeEntityId": { 
                    "type": ["string", "null"],
                    "description": "ID of the forum/area/unit/agent entity (required if scopeEntityType is not 'None')"
                  }
                }
              },
              "examples": {
                "unitAdmin": {
                  "summary": "Assign Unit Admin role",
                  "value": {
                    "roleId": "role-unit-admin",
                    "scopeEntityType": "Unit",
                    "scopeEntityId": "unit-001"
                  }
                },
                "superAdmin": {
                  "summary": "Assign Super Admin role (no scope)",
                  "value": {
                    "roleId": "role-super-admin"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Role assigned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRoleResponse"
                }
              }
            }
          },
          "400": { "description": "Invalid request (role not found, scope mismatch, etc.)" },
          "401": { "description": "Unauthenticated" },
          "404": { "description": "User not found" },
          "409": { "description": "User already has this role in the given scope" }
        }
      },
      "get": {
        "tags": ["IAM - User Roles"],
        "summary": "Get user with all assigned roles",
        "description": "Retrieves user details with all active role assignments including scope information and who assigned them.",
        "parameters": [
          { "name": "userId", "in": "path", "required": true, "schema": { "type": "string" }, "description": "User ID" }
        ],
        "responses": {
          "200": {
            "description": "User with roles retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserWithRolesResponse"
                },
                "example": {
                  "userId": "user-123",
                  "externalAuthId": "auth0|abc123",
                  "email": "john.doe@email.com",
                  "firstName": "John",
                  "lastName": "Doe",
                  "isActive": true,
                  "createdAt": "2025-01-15T00:00:00Z",
                  "lastSyncedAt": "2025-01-20T10:30:00Z",
                  "roles": [
                    {
                      "userRoleId": "ur-001",
                      "roleId": "role-forum-admin",
                      "roleCode": "forum_admin",
                      "roleName": "Forum Admin",
                      "scopeType": "Forum",
                      "scopeEntityType": "Forum",
                      "scopeEntityId": "forum-001",
                      "scopeEntityName": "Oman Community Forum",
                      "isSystemRole": true,
                      "isActive": true,
                      "assignedAt": "2025-01-20T00:00:00Z",
                      "assignedBy": {
                        "userId": "admin-001",
                        "name": "Sarah Ahmed"
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": { "description": "User not found" }
        }
      }
    },
    "/api/iam/users/{userId}/roles/{userRoleId}": {
      "delete": {
        "tags": ["IAM - User Roles"],
        "summary": "Revoke role from user",
        "description": "Revokes a previously assigned role from a user. Sets isActive to false and records who revoked it and when.",
        "parameters": [
          { "name": "userId", "in": "path", "required": true, "schema": { "type": "string" }, "description": "User ID" },
          { "name": "userRoleId", "in": "path", "required": true, "schema": { "type": "string" }, "description": "UserRole assignment ID to revoke" }
        ],
        "responses": {
          "200": {
            "description": "Role revoked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRoleResponse"
                }
              }
            }
          },
          "400": { "description": "UserRole already revoked" },
          "401": { "description": "Unauthenticated" },
          "404": { "description": "UserRole not found" }
        }
      }
    },
    "/api/iam/permissions/search": {
      "post": {
        "tags": ["IAM - Permissions"],
        "summary": "Search permissions",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "searchTerm": { "type": "string" },
                  "searchFields": { "type": "array", "items": { "type": "string" } },
                  "page": { "type": "integer", "default": 1 },
                  "pageSize": { "type": "integer", "default": 20 }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Search results" }
        }
      }
    },
    "/api/iam/permissions": {
      "post": {
        "tags": ["IAM - Permissions"],
        "summary": "Create permission",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["permissionCode", "permissionName"],
                "properties": {
                  "permissionCode": { "type": "string" },
                  "permissionName": { "type": "string" },
                  "description": { "type": "string" },
                  "module": { "type": "string" },
                  "action": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Permission created" }
        }
      }
    },
    "/api/iam/permissions/{id}": {
      "patch": {
        "tags": ["IAM - Permissions"],
        "summary": "Update permission",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "permissionCode": { "type": "string" },
                  "permissionName": { "type": "string" },
                  "description": { "type": "string" },
                  "module": { "type": "string" },
                  "action": { "type": "string" },
                  "isActive": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Permission updated" }
        }
      }
    },
    "/api/iam/roles/search": {
      "post": {
        "tags": ["IAM - Roles"],
        "summary": "Search roles",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "searchTerm": { "type": "string" },
                  "searchFields": { "type": "array", "items": { "type": "string" } },
                  "page": { "type": "integer", "default": 1 },
                  "pageSize": { "type": "integer", "default": 20 }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Search results" }
        }
      }
    },
    "/api/iam/roles": {
      "post": {
        "tags": ["IAM - Roles"],
        "summary": "Create role",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["roleCode", "roleName", "scopeType"],
                "properties": {
                  "roleCode": { "type": "string" },
                  "roleName": { "type": "string" },
                  "description": { "type": "string" },
                  "scopeType": { "type": "string", "enum": ["None", "Forum", "Area", "Unit", "Agent"] },
                  "isSystemRole": { "type": "boolean" },
                  "permissionIds": { "type": "array", "items": { "type": "string" } }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Role created" }
        }
      }
    },
    "/api/iam/roles/{id}": {
      "get": {
        "tags": ["IAM - Roles"],
        "summary": "Get role by id",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": {
          "200": {
            "description": "Role retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "roleId": { "type": "string" },
                    "roleCode": { "type": "string" },
                    "roleName": { "type": "string" },
                    "description": { "type": ["string", "null"] },
                    "scopeType": { "type": "string", "enum": ["None", "Forum", "Area", "Unit", "Agent"] },
                    "isActive": { "type": "boolean" },
                    "isSystemRole": { "type": "boolean" },
                    "permissionIds": { "type": "array", "items": { "type": "string" } },
                    "createdAt": { "type": "string", "format": "date-time" },
                    "updatedAt": { "type": ["string", "null"], "format": "date-time" }
                  }
                }
              }
            }
          },
          "404": { "description": "Role not found" }
        }
      },
      "patch": {
        "tags": ["IAM - Roles"],
        "summary": "Update role",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "roleCode": { "type": "string" },
                  "roleName": { "type": "string" },
                  "description": { "type": "string" },
                  "scopeType": { "type": "string", "enum": ["None", "Forum", "Area", "Unit", "Agent"] },
                  "isActive": { "type": "boolean" },
                  "isSystemRole": { "type": "boolean" },
                  "permissionIds": { "type": "array", "items": { "type": "string" } }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Role updated" }
        }
      }
    },
    "/api/approval-workflow/workflows": {
      "post": {
        "tags": ["Approval Workflow - Workflows"],
        "summary": "Create a new approval workflow",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["workflowCode", "workflowName", "module", "entityType", "stages"],
                "properties": {
                  "workflowCode": { "type": "string" },
                  "workflowName": { "type": "string" },
                  "description": { "type": "string" },
                  "module": { "type": "string", "enum": ["Membership", "Wallet", "Claims", "Contributions", "Organization"] },
                  "entityType": { "type": "string" },
                  "isActive": { "type": "boolean" },
                  "requiresAllStages": { "type": "boolean" },
                  "stages": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "stageName": { "type": "string" },
                        "stageOrder": { "type": "integer" },
                        "approverType": { "type": "string", "enum": ["Role", "SpecificUser", "Hierarchy", "OrganizationAdmin"] },
                        "roleId": { "type": "string", "format": "uuid", "nullable": true },
                        "userId": { "type": "string", "format": "uuid", "nullable": true },
                        "organizationBody": { "type": "string", "enum": ["Unit", "Area", "Forum"], "nullable": true },
                        "isOptional": { "type": "boolean" },
                        "autoApprove": { "type": "boolean" }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Workflow created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "workflowId": { "type": "string", "format": "uuid" },
                    "workflowCode": { "type": "string" },
                    "workflowName": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/approval-workflow/workflows/search": {
      "post": {
        "tags": ["Approval Workflow - Workflows"],
        "summary": "Search approval workflows",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SearchRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApprovalWorkflowsSearchResponse" }
              }
            }
          }
        }
      }
    },
    "/api/approval-workflow/workflows/{workflowId}": {
      "get": {
        "tags": ["Approval Workflow - Workflows"],
        "summary": "Get workflow by ID",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Workflow details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "workflowId": { "type": "string", "format": "uuid" },
                    "workflowCode": { "type": "string" },
                    "workflowName": { "type": "string" },
                    "module": { "type": "string" },
                    "stages": { "type": "array", "items": {
                      "type": "object"
                    } }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Approval Workflow - Workflows"],
        "summary": "Update workflow with stages",
        "description": "Update workflow metadata and intelligently manage stages. Supports adding new stages, updating existing ones, and deleting unused stages. Stages with existing executions have limited update capabilities.",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "workflowName": { 
                    "type": "string",
                    "description": "Updated workflow name"
                  },
                  "description": { 
                    "type": "string", 
                    "nullable": true,
                    "description": "Updated workflow description"
                  },
                  "isActive": { 
                    "type": "boolean",
                    "description": "Set to false to deactivate (fails if pending requests exist)"
                  },
                  "requiresAllStages": { 
                    "type": "boolean",
                    "description": "Whether all stages must be completed"
                  },
                  "stages": {
                    "type": "array",
                    "description": "Array of stages. Include stageId to update existing stage, omit/null to create new. Stages not in this array will be deleted (if they have no executions).",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": ["stageName", "stageOrder", "approverType"],
                      "properties": {
                        "stageId": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true,
                          "description": "Stage ID to update existing stage. Null or omitted creates new stage."
                        },
                        "stageName": {
                          "type": "string",
                          "description": "Stage display name"
                        },
                        "stageOrder": {
                          "type": "integer",
                          "minimum": 1,
                          "description": "Sequential order (1, 2, 3...). Must be unique within workflow."
                        },
                        "approverType": {
                          "type": "string",
                          "enum": ["SpecificUser", "Role", "Dynamic"],
                          "description": "Type of approver. Cannot change if stage has executions."
                        },
                        "roleId": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true,
                          "description": "Role ID for Role-based approval"
                        },
                        "userId": {
                          "type": "string",
                          "format": "uuid",
                          "nullable": true,
                          "description": "User ID for SpecificUser approval"
                        },
                        "organizationBody": {
                          "type": "string",
                          "enum": ["Forum", "Area", "Unit"],
                          "nullable": true,
                          "description": "Organization level for role-based approval"
                        },
                        "isOptional": {
                          "type": "boolean",
                          "description": "Whether this stage can be skipped"
                        },
                        "autoApprove": {
                          "type": "boolean",
                          "description": "Whether to auto-approve this stage"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "workflowName": "Updated Member Registration Approval",
                  "description": "Enhanced workflow description",
                  "isActive": true,
                  "stages": [
                    {
                      "stageId": "existing-stage-uuid-1",
                      "stageOrder": 1,
                      "stageName": "Agent Review (Updated)",
                      "approverType": "Role",
                      "roleId": "agent-role-uuid",
                      "organizationBody": "Unit",
                      "isOptional": false
                    },
                    {
                      "stageOrder": 2,
                      "stageName": "Unit Head Approval",
                      "approverType": "Role",
                      "roleId": "unit-head-role-uuid",
                      "organizationBody": "Unit",
                      "isOptional": false
                    }
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workflow updated successfully with stages",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "workflow": { "$ref": "#/components/schemas/ApprovalWorkflow" },
                    "stages": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ApprovalStage" }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Validation errors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "examples": [
                        "Stage orders must be sequential (1, 2, 3...)",
                        "Duplicate stage orders not allowed",
                        "Cannot deactivate workflow with pending requests",
                        "Cannot delete stages that have existing approval executions",
                        "Cannot change order of stage as it has existing executions",
                        "Cannot change approver type of stage as it has existing executions"
                      ]
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Workflow not found"
          }
        }
      }
    },
    "/api/approval-workflow/workflows/code/{workflowCode}": {
      "get": {
        "tags": ["Approval Workflow - Workflows"],
        "summary": "Get workflow by code",
        "parameters": [
          {
            "name": "workflowCode",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Workflow details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "workflowId": { "type": "string", "format": "uuid" },
                    "workflowCode": { "type": "string" },
                    "workflowName": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/approval-workflow/workflows/all": {
      "get": {
        "tags": ["Approval Workflow - Workflows"],
        "summary": "List all workflows (including inactive)",
        "responses": {
          "200": {
            "description": "List of all workflows",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "workflowId": { "type": "string", "format": "uuid" },
                      "workflowCode": { "type": "string" },
                      "isActive": { "type": "boolean" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/approval-workflow/requests": {
      "post": {
        "tags": ["Approval Workflow - Requests"],
        "summary": "Submit a new approval request",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["workflowCode", "entityType", "entityId"],
                "properties": {
                  "workflowCode": { "type": "string" },
                  "entityType": { "type": "string" },
                  "entityId": { "type": "string", "format": "uuid" },
                  "forumId": { "type": "string", "format": "uuid", "nullable": true },
                  "areaId": { "type": "string", "format": "uuid", "nullable": true },
                  "unitId": { "type": "string", "format": "uuid", "nullable": true }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Approval request submitted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "requestId": { "type": "string", "format": "uuid" },
                    "status": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/approval-workflow/requests/search": {
      "post": {
        "tags": ["Approval Workflow - Requests"],
        "summary": "Search approval requests",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SearchRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApprovalRequestsSearchResponse" }
              }
            }
          }
        }
      }
    },
    "/api/approval-workflow/requests/process": {
      "post": {
        "tags": ["Approval Workflow - Requests"],
        "summary": "Process an approval (approve or reject)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["executionId", "decision"],
                "properties": {
                  "executionId": { "type": "string", "format": "uuid" },
                  "decision": { "type": "string", "enum": ["Approve", "Reject"] },
                  "comments": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Approval processed successfully" }
        }
      }
    },
    "/api/approval-workflow/requests/{requestId}": {
      "get": {
        "tags": ["Approval Workflow - Requests"],
        "summary": "Get approval request by ID",
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Approval request details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "requestId": { "type": "string", "format": "uuid" },
                    "workflowCode": { "type": "string" },
                    "entityType": { "type": "string" },
                    "status": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/approval-workflow/requests/entity/{entityType}/{entityId}": {
      "get": {
        "tags": ["Approval Workflow - Requests"],
        "summary": "Get approval request by entity",
        "parameters": [
          {
            "name": "entityType",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "entityId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Approval request for the entity",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "requestId": { "type": "string", "format": "uuid" },
                    "entityType": { "type": "string" },
                    "status": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/approval-workflow/approvals/pending/{approverId}": {
      "get": {
        "tags": ["Approval Workflow - Approvals"],
        "summary": "Get pending approvals for an approver",
        "parameters": [
          {
            "name": "approverId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of pending approvals",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "executionId": { "type": "string", "format": "uuid" },
                      "requestId": { "type": "string", "format": "uuid" },
                      "stageName": { "type": "string" },
                      "status": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/forums/search": {
      "post": {
        "tags": ["Organization Bodies - Forums"],
        "summary": "Search forums with advanced filtering",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/forums": {
      "post": {
        "tags": ["Organization Bodies - Forums"],
        "summary": "Create a new forum",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["forumCode", "forumName", "adminUserId", "establishedDate"],
                "properties": {
                  "forumCode": { "type": "string" },
                  "forumName": { "type": "string" },
                  "adminUserId": { "type": "string", "format": "uuid" },
                  "establishedDate": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Forum created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "forumId": { "type": "string", "format": "uuid" },
                    "forumCode": { "type": "string" },
                    "forumName": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Organization Bodies - Forums"],
        "summary": "List all forums",
        "responses": {
          "200": {
            "description": "List of forums",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "forumId": { "type": "string", "format": "uuid" },
                      "forumCode": { "type": "string" },
                      "forumName": { "type": "string" },
                      "establishedDate": { "type": "string", "format": "date" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/forums/{forumId}": {
      "get": {
        "tags": ["Organization Bodies - Forums"],
        "summary": "Get forum by ID",
        "parameters": [
          {
            "name": "forumId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Forum details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "forumId": { "type": "string", "format": "uuid" },
                    "forumCode": { "type": "string" },
                    "forumName": { "type": "string" },
                    "adminUserId": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Organization Bodies - Forums"],
        "summary": "Update forum",
        "parameters": [
          {
            "name": "forumId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "forumName": { "type": "string" },
                  "establishedDate": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Forum updated successfully" }
        }
      }
    },
    "/api/organization-bodies/forums/code/{forumCode}": {
      "get": {
        "tags": ["Organization Bodies - Forums"],
        "summary": "Get forum by code",
        "parameters": [
          {
            "name": "forumCode",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Forum details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "forumId": { "type": "string", "format": "uuid" },
                    "forumCode": { "type": "string" },
                    "forumName": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/forums/{forumId}/assign-admin": {
      "post": {
        "tags": ["Organization Bodies - Forums"],
        "summary": "Assign forum admin",
        "parameters": [
          {
            "name": "forumId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["newAdminUserId"],
                "properties": {
                  "newAdminUserId": { "type": "string", "format": "uuid" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Admin assigned successfully" }
        }
      }
    },
    "/api/organization-bodies/areas/search": {
      "post": {
        "tags": ["Organization Bodies - Areas"],
        "summary": "Search areas with advanced filtering",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/areas": {
      "post": {
        "tags": ["Organization Bodies - Areas"],
        "summary": "Create a new area",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["forumId", "areaCode", "areaName", "adminUserId", "establishedDate"],
                "properties": {
                  "forumId": { "type": "string", "format": "uuid" },
                  "areaCode": { "type": "string" },
                  "areaName": { "type": "string" },
                  "adminUserId": { "type": "string", "format": "uuid" },
                  "establishedDate": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Area created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "areaId": { "type": "string", "format": "uuid" },
                    "areaCode": { "type": "string" },
                    "areaName": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/areas/{areaId}": {
      "get": {
        "tags": ["Organization Bodies - Areas"],
        "summary": "Get area by ID",
        "parameters": [
          {
            "name": "areaId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Area details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "areaId": { "type": "string", "format": "uuid" },
                    "areaCode": { "type": "string" },
                    "areaName": { "type": "string" },
                    "forumId": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Organization Bodies - Areas"],
        "summary": "Update area",
        "parameters": [
          {
            "name": "areaId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "areaName": { "type": "string" },
                  "establishedDate": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Area updated successfully" }
        }
      }
    },
    "/api/organization-bodies/areas/{areaId}/assign-admin": {
      "post": {
        "tags": ["Organization Bodies - Areas"],
        "summary": "Assign area admin",
        "parameters": [
          {
            "name": "areaId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["newAdminUserId"],
                "properties": {
                  "newAdminUserId": { "type": "string", "format": "uuid" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Admin assigned successfully" }
        }
      }
    },
    "/api/organization-bodies/forums/{forumId}/areas": {
      "get": {
        "tags": ["Organization Bodies - Areas"],
        "summary": "List areas by forum",
        "parameters": [
          {
            "name": "forumId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of areas in forum",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "areaId": { "type": "string", "format": "uuid" },
                      "areaCode": { "type": "string" },
                      "areaName": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/units/search": {
      "post": {
        "tags": ["Organization Bodies - Units"],
        "summary": "Search units with advanced filtering",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/units": {
      "post": {
        "tags": ["Organization Bodies - Units"],
        "summary": "Create a new unit",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["areaId", "unitCode", "unitName", "adminUserId", "establishedDate"],
                "properties": {
                  "areaId": { "type": "string", "format": "uuid" },
                  "unitCode": { "type": "string" },
                  "unitName": { "type": "string" },
                  "adminUserId": { "type": "string", "format": "uuid" },
                  "establishedDate": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Unit created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "unitId": { "type": "string", "format": "uuid" },
                    "unitCode": { "type": "string" },
                    "unitName": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/units/{unitId}": {
      "get": {
        "tags": ["Organization Bodies - Units"],
        "summary": "Get unit by ID",
        "parameters": [
          {
            "name": "unitId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Unit details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "unitId": { "type": "string", "format": "uuid" },
                    "unitCode": { "type": "string" },
                    "unitName": { "type": "string" },
                    "areaId": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Organization Bodies - Units"],
        "summary": "Update unit",
        "parameters": [
          {
            "name": "unitId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "unitName": { "type": "string" },
                  "establishedDate": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Unit updated successfully" }
        }
      }
    },
    "/api/organization-bodies/units/{unitId}/assign-admin": {
      "post": {
        "tags": ["Organization Bodies - Units"],
        "summary": "Assign unit admin",
        "parameters": [
          {
            "name": "unitId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["newAdminUserId"],
                "properties": {
                  "newAdminUserId": { "type": "string", "format": "uuid" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Admin assigned successfully" }
        }
      }
    },
    "/api/organization-bodies/areas/{areaId}/units": {
      "get": {
        "tags": ["Organization Bodies - Units"],
        "summary": "List units by area",
        "parameters": [
          {
            "name": "areaId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of units in area",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "unitId": { "type": "string", "format": "uuid" },
                      "unitCode": { "type": "string" },
                      "unitName": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/organization-bodies/forums/{forumId}/units": {
      "get": {
        "tags": ["Organization Bodies - Units"],
        "summary": "List all units by forum",
        "parameters": [
          {
            "name": "forumId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of units in forum",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "unitId": { "type": "string", "format": "uuid" },
                      "unitCode": { "type": "string" },
                      "unitName": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/search": {
      "post": {
        "tags": ["Agents"],
        "summary": "Search agents with advanced filtering",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/register": {
      "post": {
        "tags": ["Agents"],
        "summary": "Start agent registration (creates draft)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["unitId", "areaId", "forumId", "agentCode", "firstName", "lastName", "dateOfBirth", "gender", "contactNumber", "email", "joinedDate"],
                "properties": {
                  "unitId": { "type": "string", "format": "uuid" },
                  "areaId": { "type": "string", "format": "uuid" },
                  "forumId": { "type": "string", "format": "uuid" },
                  "agentCode": { "type": "string" },
                  "firstName": { "type": "string" },
                  "middleName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "dateOfBirth": { "type": "string", "format": "date" },
                  "gender": { "type": "string", "enum": ["Male", "Female", "Other"] },
                  "contactNumber": { "type": "string" },
                  "alternateContactNumber": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "addressLine1": { "type": "string" },
                  "addressLine2": { "type": "string" },
                  "city": { "type": "string" },
                  "state": { "type": "string" },
                  "postalCode": { "type": "string" },
                  "country": { "type": "string" },
                  "joinedDate": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Agent registration started",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "agentId": { "type": "string", "format": "uuid" },
                    "agentCode": { "type": "string" },
                    "registrationStatus": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/{agentId}": {
      "get": {
        "tags": ["Agents"],
        "summary": "Get agent by ID",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "agentId": { "type": "string", "format": "uuid" },
                    "agentCode": { "type": "string" },
                    "firstName": { "type": "string" },
                    "lastName": { "type": "string" },
                    "registrationStatus": { "type": "string" },
                    "agentStatus": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["Agents"],
        "summary": "Update agent details (for approved agents)",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": { "type": "string" },
                  "middleName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "contactNumber": { "type": "string" },
                  "alternateContactNumber": { "type": "string" },
                  "addressLine1": { "type": "string" },
                  "addressLine2": { "type": "string" },
                  "city": { "type": "string" },
                  "state": { "type": "string" },
                  "postalCode": { "type": "string" },
                  "country": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Agent updated successfully" }
        }
      }
    },
    "/api/agents/{agentId}/draft": {
      "patch": {
        "tags": ["Agents"],
        "summary": "Update agent draft (before submission)",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": { "type": "string" },
                  "middleName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "dateOfBirth": { "type": "string", "format": "date" },
                  "gender": { "type": "string", "enum": ["Male", "Female", "Other"] },
                  "contactNumber": { "type": "string" },
                  "alternateContactNumber": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "addressLine1": { "type": "string" },
                  "addressLine2": { "type": "string" },
                  "city": { "type": "string" },
                  "state": { "type": "string" },
                  "postalCode": { "type": "string" },
                  "country": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Draft updated successfully" }
        }
      }
    },
    "/api/agents/{agentId}/submit": {
      "post": {
        "tags": ["Agents"],
        "summary": "Submit agent registration for approval",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Registration submitted for approval" }
        }
      }
    },
    "/api/agents/{agentId}/terminate": {
      "post": {
        "tags": ["Agents"],
        "summary": "Terminate an agent",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["terminationReason"],
                "properties": {
                  "terminationReason": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Agent terminated successfully" }
        }
      }
    },
    "/api/agents/unit/{unitId}": {
      "get": {
        "tags": ["Agents"],
        "summary": "List agents by unit",
        "parameters": [
          {
            "name": "unitId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of agents in unit",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "agentId": { "type": "string", "format": "uuid" },
                      "agentCode": { "type": "string" },
                      "firstName": { "type": "string" },
                      "lastName": { "type": "string" },
                      "agentStatus": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/area/{areaId}": {
      "get": {
        "tags": ["Agents"],
        "summary": "List agents by area",
        "parameters": [
          {
            "name": "areaId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of agents in area",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "agentId": { "type": "string", "format": "uuid" },
                      "agentCode": { "type": "string" },
                      "firstName": { "type": "string" },
                      "lastName": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/forum/{forumId}": {
      "get": {
        "tags": ["Agents"],
        "summary": "List agents by forum",
        "parameters": [
          {
            "name": "forumId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of agents in forum",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "agentId": { "type": "string", "format": "uuid" },
                      "agentCode": { "type": "string" },
                      "firstName": { "type": "string" },
                      "lastName": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/my-profile": {
      "get": {
        "tags": ["Agent Profile"],
        "summary": "Get logged-in agent's profile",
        "description": "Returns the profile of the currently logged-in agent based on their user token",
        "responses": {
          "200": {
            "description": "Agent profile",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AgentProfile" }
              }
            }
          },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Agent profile not found for user" }
        }
      }
    },
    "/api/agents/{agentId}/profile": {
      "get": {
        "tags": ["Agent Profile"],
        "summary": "Get agent profile with hierarchy",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent profile with hierarchy details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AgentProfile" }
              }
            }
          },
          "404": { "description": "Agent not found" }
        }
      },
      "put": {
        "tags": ["Agent Profile"],
        "summary": "Update agent profile",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": { "type": "string", "minLength": 1, "maxLength": 100 },
                  "middleName": { "type": "string", "maxLength": 100, "nullable": true },
                  "lastName": { "type": "string", "minLength": 1, "maxLength": 100 },
                  "contactNumber": { "type": "string", "minLength": 10, "maxLength": 20 },
                  "alternateContactNumber": { "type": "string", "nullable": true },
                  "email": { "type": "string", "format": "email" },
                  "addressLine1": { "type": "string", "nullable": true },
                  "addressLine2": { "type": "string", "nullable": true },
                  "city": { "type": "string", "nullable": true },
                  "state": { "type": "string", "nullable": true },
                  "postalCode": { "type": "string", "nullable": true },
                  "country": { "type": "string", "nullable": true }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated agent profile",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AgentProfile" }
              }
            }
          },
          "404": { "description": "Agent not found" }
        }
      }
    },
    "/api/agents/{agentId}/stats": {
      "get": {
        "tags": ["Agent Profile"],
        "summary": "Get agent dashboard stats",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "period",
            "in": "query",
            "schema": { "type": "string", "enum": ["thisMonth", "lastMonth", "thisYear"], "default": "thisMonth" }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent stats",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AgentStats" }
              }
            }
          },
          "404": { "description": "Agent not found" }
        }
      }
    },
    "/api/agents/{agentId}/members": {
      "get": {
        "tags": ["Agent Profile"],
        "summary": "Get agent's members",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["Active", "Suspended", "Frozen", "Closed", "Deceased"] }
          },
          {
            "name": "tier",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "search",
            "in": "query",
            "schema": { "type": "string", "maxLength": 100 }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of members under agent",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AgentMembersResponse" }
              }
            }
          },
          "404": { "description": "Agent not found" }
        }
      }
    },
    "/api/agents/{agentId}/members/export": {
      "get": {
        "tags": ["Agent Profile"],
        "summary": "Export agent's members",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "format",
            "in": "query",
            "schema": { "type": "string", "enum": ["csv", "excel"], "default": "csv" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of members for export",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "members": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/AgentMember" }
                    }
                  }
                }
              }
            }
          },
          "404": { "description": "Agent not found" }
        }
      }
    },
    "/api/agents/{agentId}/performance": {
      "get": {
        "tags": ["Agent Profile"],
        "summary": "Get agent performance metrics",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "period",
            "in": "query",
            "schema": { "type": "string", "enum": ["thisMonth", "lastMonth", "thisYear"], "default": "thisMonth" }
          },
          {
            "name": "startDate",
            "in": "query",
            "schema": { "type": "string", "format": "date-time" }
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": { "type": "string", "format": "date-time" }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent performance metrics with trends",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AgentPerformance" }
              }
            }
          },
          "404": { "description": "Agent not found" }
        }
      }
    },
    "/api/agents/{agentId}/hierarchy": {
      "get": {
        "tags": ["Agent Profile"],
        "summary": "Get agent's organization hierarchy",
        "parameters": [
          {
            "name": "agentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent hierarchy",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AgentHierarchy" }
              }
            }
          },
          "404": { "description": "Agent not found" }
        }
      }
    },
    "/api/members/search": {
      "post": {
        "tags": ["Members - Queries"],
        "summary": "Search members with advanced filtering",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/members/nominees/search": {
      "get": {
        "tags": ["Members - Nominees"],
        "summary": "Search nominees by name and contact number",
        "description": "Search for nominees across all members with filtering by name and contact number",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "Search by nominee name (case-insensitive, partial match)",
            "required": false,
            "schema": { "type": "string" }
          },
          {
            "name": "contactNumber",
            "in": "query",
            "description": "Search by contact number (searches both primary and alternate contact)",
            "required": false,
            "schema": { "type": "string" }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number",
            "required": false,
            "schema": { "type": "integer", "default": 1, "minimum": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Items per page",
            "required": false,
            "schema": { "type": "integer", "default": 20, "minimum": 1, "maximum": 100 }
          }
        ],
        "responses": {
          "200": {
            "description": "List of nominees matching search criteria",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "nomineeId": { "type": "string", "format": "uuid" },
                      "memberId": { "type": "string", "format": "uuid" },
                      "name": { "type": "string" },
                      "relationType": { "type": "string" },
                      "dateOfBirth": { "type": "string", "format": "date", "nullable": true },
                      "contactNumber": { "type": "string", "nullable": true },
                      "alternateContactNumber": { "type": "string", "nullable": true },
                      "addressLine1": { "type": "string", "nullable": true },
                      "addressLine2": { "type": "string", "nullable": true },
                      "city": { "type": "string", "nullable": true },
                      "state": { "type": "string", "nullable": true },
                      "postalCode": { "type": "string", "nullable": true },
                      "country": { "type": "string", "nullable": true },
                      "idProofType": { "type": "string", "nullable": true },
                      "idProofNumber": { "type": "string", "nullable": true },
                      "priority": { "type": "integer" },
                      "isActive": { "type": "boolean" },
                      "member": {
                        "type": "object",
                        "nullable": true,
                        "properties": {
                          "memberCode": { "type": "string" },
                          "firstName": { "type": "string" },
                          "middleName": { "type": "string", "nullable": true },
                          "lastName": { "type": "string" },
                          "contactNumber": { "type": "string" },
                          "memberStatus": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members/register": {
      "post": {
        "tags": ["Members - Registration"],
        "summary": "Start member registration (Step 1: Personal Details)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["firstName", "lastName", "dateOfBirth", "gender", "contactNumber", "addressLine1", "city", "state", "postalCode", "country", "tierId", "unitId", "agentId"],
                "properties": {
                  "firstName": { "type": "string" },
                  "middleName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "dateOfBirth": { "type": "string", "format": "date" },
                  "gender": { "type": "string", "enum": ["Male", "Female", "Other"] },
                  "contactNumber": { "type": "string" },
                  "alternateContactNumber": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "addressLine1": { "type": "string" },
                  "addressLine2": { "type": "string" },
                  "city": { "type": "string" },
                  "state": { "type": "string" },
                  "postalCode": { "type": "string" },
                  "country": { "type": "string" },
                  "tierId": { "type": "string", "format": "uuid" },
                  "unitId": { "type": "string", "format": "uuid" },
                  "agentId": { "type": "string", "format": "uuid" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Member registration started",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "memberId": { "type": "string", "format": "uuid" },
                    "memberCode": { "type": "string" },
                    "currentStep": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members/metadata": {
      "get": {
        "tags": ["Members - Queries"],
        "summary": "Get member metadata (document types, categories, collection modes)",
        "responses": {
          "200": {
            "description": "Member metadata for dropdowns and selects",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "documentTypes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "value": { "type": "string" },
                          "label": { "type": "string" }
                        }
                      }
                    },
                    "documentCategories": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "value": { "type": "string" },
                          "label": { "type": "string" }
                        }
                      }
                    },
                    "collectionModes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "value": { "type": "string" },
                          "label": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members/{memberId}": {
      "get": {
        "tags": ["Members - Queries"],
        "summary": "Get member details",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Member details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "memberId": { "type": "string", "format": "uuid" },
                    "memberCode": { "type": "string" },
                    "firstName": { "type": "string" },
                    "lastName": { "type": "string" },
                    "registrationStatus": { "type": "string" },
                    "memberStatus": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members": {
      "get": {
        "tags": ["Members - Queries"],
        "summary": "List members with filters",
        "parameters": [
          { "name": "registrationStatus", "in": "query", "schema": { "type": "string", "enum": ["Draft", "PendingApproval", "Approved", "Rejected"] } },
          { "name": "memberStatus", "in": "query", "schema": { "type": "string", "enum": ["Active", "Frozen", "Suspended", "Closed", "Deceased"] } },
          { "name": "unitId", "in": "query", "schema": { "type": "string", "format": "uuid" } },
          { "name": "agentId", "in": "query", "schema": { "type": "string", "format": "uuid" } },
          { "name": "tierId", "in": "query", "schema": { "type": "string", "format": "uuid" } },
          { "name": "searchQuery", "in": "query", "schema": { "type": "string" } },
          { "name": "page", "in": "query", "schema": { "type": "integer", "default": 1 } },
          { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 20 } }
        ],
        "responses": {
          "200": {
            "description": "List of members",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": { "type": "array", "items": { "type": "object" } },
                    "total": { "type": "integer" },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members/{memberId}/draft/personal-details": {
      "patch": {
        "tags": ["Members - Registration"],
        "summary": "Save personal details as draft",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": { "type": "string" },
                  "middleName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "dateOfBirth": { "type": "string", "format": "date" },
                  "gender": { "type": "string", "enum": ["Male", "Female", "Other"] },
                  "contactNumber": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "addressLine1": { "type": "string" },
                  "city": { "type": "string" },
                  "state": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Draft saved successfully" }
        }
      }
    },
    "/api/members/{memberId}/complete/personal-details": {
      "post": {
        "tags": ["Members - Registration"],
        "summary": "Complete personal details step",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Personal details step completed" }
        }
      }
    },
    "/api/members/{memberId}/nominees": {
      "post": {
        "tags": ["Members - Nominees"],
        "summary": "Add nominee (Step 2)",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "relationType", "dateOfBirth", "contactNumber", "addressLine1", "city", "state", "postalCode", "country", "idProofType", "idProofNumber"],
                "properties": {
                  "name": { "type": "string" },
                  "relationType": { "type": "string", "enum": ["Father", "Mother", "Spouse", "Son", "Daughter", "Brother", "Sister", "Other"] },
                  "dateOfBirth": { "type": "string", "format": "date" },
                  "contactNumber": { "type": "string" },
                  "addressLine1": { "type": "string" },
                  "city": { "type": "string" },
                  "state": { "type": "string" },
                  "postalCode": { "type": "string" },
                  "country": { "type": "string" },
                  "idProofType": { "type": "string", "enum": ["NationalID", "Passport", "DrivingLicense", "VoterID", "Other"] },
                  "idProofNumber": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Nominee added",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "nomineeId": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Members - Nominees"],
        "summary": "Get all nominees for a member",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of nominees",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "nomineeId": { "type": "string", "format": "uuid" },
                      "name": { "type": "string" },
                      "relationType": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members/{memberId}/nominees/{nomineeId}": {
      "patch": {
        "tags": ["Members - Nominees"],
        "summary": "Update nominee",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "nomineeId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "contactNumber": { "type": "string" },
                  "addressLine1": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Nominee updated successfully" }
        }
      },
      "delete": {
        "tags": ["Members - Nominees"],
        "summary": "Remove nominee",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "nomineeId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Nominee removed successfully" }
        }
      }
    },
    "/api/members/{memberId}/complete/nominees": {
      "post": {
        "tags": ["Members - Nominees"],
        "summary": "Complete nominees step",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Nominees step completed" }
        }
      }
    },
    "/api/members/{memberId}/documents": {
      "post": {
        "tags": ["Members - Documents"],
        "summary": "Upload document (Step 3)",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["documentType", "documentCategory", "documentName", "fileUrl", "fileSize", "mimeType"],
                "properties": {
                  "nomineeId": { "type": "string", "format": "uuid" },
                  "documentType": { "type": "string", "enum": ["NationalID", "Passport", "MemberPhoto", "Other"] },
                  "documentCategory": { "type": "string", "enum": ["MemberIdentity", "MemberAddress", "MemberPhoto", "NomineeProof", "Other"] },
                  "documentName": { "type": "string" },
                  "fileUrl": { "type": "string", "format": "uri" },
                  "fileSize": { "type": "integer" },
                  "mimeType": { "type": "string", "enum": ["application/pdf", "image/jpeg", "image/png"] }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Document uploaded",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "documentId": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Members - Documents"],
        "summary": "Get all documents for a member",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of documents",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "documentId": { "type": "string", "format": "uuid" },
                      "documentType": { "type": "string" },
                      "documentName": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members/{memberId}/documents/{documentId}": {
      "delete": {
        "tags": ["Members - Documents"],
        "summary": "Remove document",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "documentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Document removed successfully" }
        }
      }
    },
    "/api/members/{memberId}/payment": {
      "post": {
        "tags": ["Members - Payment"],
        "summary": "Record registration payment (Step 3)",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["registrationFee", "advanceDeposit", "collectedBy", "collectionDate", "collectionMode"],
                "properties": {
                  "registrationFee": { "type": "number" },
                  "advanceDeposit": { "type": "number" },
                  "collectedBy": { "type": "string", "format": "uuid" },
                  "collectionDate": { "type": "string", "format": "date" },
                  "collectionMode": { "type": "string", "enum": ["Cash", "BankTransfer", "Cheque", "Online"] },
                  "referenceNumber": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": { "description": "Payment recorded successfully" }
        }
      },
      "get": {
        "tags": ["Members - Payment"],
        "summary": "Get payment details",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "registrationFee": { "type": "number" },
                    "advanceDeposit": { "type": "number" },
                    "collectionMode": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members/{memberId}/submit": {
      "post": {
        "tags": ["Members - Registration"],
        "summary": "Submit registration for approval",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Registration submitted for approval" }
        }
      }
    },
    "/api/members/{memberId}/suspend": {
      "post": {
        "tags": ["Members - Management"],
        "summary": "Suspend a member",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["reason", "suspendedBy"],
                "properties": {
                  "reason": { "type": "string" },
                  "suspendedBy": { "type": "string", "format": "uuid" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Member suspended successfully" }
        }
      }
    },
    "/api/members/{memberId}/reactivate": {
      "post": {
        "tags": ["Members - Management"],
        "summary": "Reactivate a suspended member",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["reactivatedBy"],
                "properties": {
                  "reactivatedBy": { "type": "string", "format": "uuid" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Member reactivated successfully" }
        }
      }
    },
    "/api/members/{memberId}/close": {
      "post": {
        "tags": ["Members - Management"],
        "summary": "Close member account",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["closureReason"],
                "properties": {
                  "closureReason": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Member account closed successfully" }
        }
      }
    },
    "/api/members/{memberId}/profile": {
      "get": {
        "tags": ["Members - Profile"],
        "summary": "Get member profile with wallet information",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Member profile with wallet details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "memberId": { "type": "string", "format": "uuid" },
                    "memberCode": { "type": "string" },
                    "firstName": { "type": "string" },
                    "lastName": { "type": "string" },
                    "wallet": {
                      "type": "object",
                      "properties": {
                        "walletId": { "type": "string", "format": "uuid" },
                        "currentBalance": { "type": "number" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Members - Profile"],
        "summary": "Update member profile (approved members only)",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": { "type": "string" },
                  "middleName": { "type": "string" },
                  "lastName": { "type": "string" },
                  "dateOfBirth": { "type": "string", "format": "date" },
                  "gender": { "type": "string", "enum": ["Male", "Female", "Other"] },
                  "contactNumber": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "addressLine1": { "type": "string" },
                  "addressLine2": { "type": "string" },
                  "city": { "type": "string" },
                  "state": { "type": "string" },
                  "postalCode": { "type": "string" },
                  "country": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Profile updated successfully" },
          "400": { "description": "Profile can only be updated for approved members" }
        }
      }
    },
    "/api/my-profile": {
      "get": {
        "tags": ["Members - Profile"],
        "summary": "Get logged-in member's profile",
        "responses": {
          "200": {
            "description": "Current member's profile",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "memberId": { "type": "string", "format": "uuid" },
                    "memberCode": { "type": "string" },
                    "firstName": { "type": "string" },
                    "lastName": { "type": "string" },
                    "wallet": {
                      "type": "object",
                      "properties": {
                        "walletId": { "type": "string", "format": "uuid" },
                        "currentBalance": { "type": "number" }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": { "description": "Member profile not found" }
        }
      }
    },
    "/api/members/{memberId}/documents/{documentId}/download": {
      "get": {
        "tags": ["Members - Profile"],
        "summary": "Download member document",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "documentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "File stream",
            "content": {
              "application/pdf": {},
              "image/jpeg": {},
              "image/png": {}
            }
          },
          "404": { "description": "Document not found" }
        }
      }
    },
    "/api/membership/tiers": {
      "get": {
        "tags": ["Membership"],
        "summary": "List all membership tiers",
        "description": "Retrieves all membership tiers or only active ones based on query parameter",
        "parameters": [
          {
            "name": "activeOnly",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            },
            "description": "If true, returns only active membership tiers"
          }
        ],
        "responses": {
          "200": {
            "description": "Membership tiers retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "Membership tiers retrieved successfully" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/MembershipTier" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/membership/tiers/{tierId}": {
      "get": {
        "tags": ["Membership"],
        "summary": "Get membership tier by ID",
        "description": "Retrieves a specific membership tier by its ID",
        "parameters": [
          {
            "name": "tierId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "Membership tier ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Membership tier retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "Membership tier retrieved successfully" },
                    "data": { "$ref": "#/components/schemas/MembershipTier" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Membership tier not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": false },
                    "message": { "type": "string", "example": "Membership tier not found" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/accounts": {
      "post": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Create a new chart of account",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["accountCode", "accountName", "accountType", "normalBalance"],
                "properties": {
                  "accountCode": { "type": "string", "maxLength": 20 },
                  "accountName": { "type": "string", "maxLength": 200 },
                  "accountType": { "type": "string", "enum": ["Asset", "Liability", "Revenue", "Expense", "Equity"] },
                  "accountCategory": { "type": "string", "maxLength": 100 },
                  "parentAccountId": { "type": "string", "format": "uuid" },
                  "normalBalance": { "type": "string", "enum": ["Debit", "Credit"] },
                  "isSystemAccount": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Account created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "accountId": { "type": "string", "format": "uuid" },
                    "accountCode": { "type": "string" },
                    "accountName": { "type": "string" },
                    "accountType": { "type": "string" },
                    "currentBalance": { "type": "number" }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Get all chart of accounts",
        "responses": {
          "200": {
            "description": "List of all accounts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "accountId": { "type": "string", "format": "uuid" },
                      "accountCode": { "type": "string" },
                      "accountName": { "type": "string" },
                      "accountType": { "type": "string" },
                      "currentBalance": { "type": "number" },
                      "isActive": { "type": "boolean" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/accounts/search": {
      "post": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Search chart of accounts",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/accounts/{accountId}": {
      "get": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Get account by ID",
        "parameters": [
          {
            "name": "accountId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Account details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "accountId": { "type": "string", "format": "uuid" },
                    "accountCode": { "type": "string" },
                    "accountName": { "type": "string" },
                    "accountType": { "type": "string" },
                    "currentBalance": { "type": "number" },
                    "normalBalance": { "type": "string" },
                    "isActive": { "type": "boolean" },
                    "isSystemAccount": { "type": "boolean" }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Update account",
        "parameters": [
          {
            "name": "accountId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "accountName": { "type": "string", "maxLength": 200 },
                  "accountCategory": { "type": "string", "maxLength": 100 }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Account updated successfully" }
        }
      },
      "delete": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Deactivate account",
        "parameters": [
          {
            "name": "accountId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Account deactivated successfully" }
        }
      }
    },
    "/api/gl/accounts/code/{accountCode}": {
      "get": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Get account by code",
        "parameters": [
          {
            "name": "accountCode",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Account details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "accountId": { "type": "string", "format": "uuid" },
                    "accountCode": { "type": "string" },
                    "accountName": { "type": "string" },
                    "accountType": { "type": "string" },
                    "currentBalance": { "type": "number" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/accounts/type/{accountType}": {
      "get": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Get accounts by type",
        "parameters": [
          {
            "name": "accountType",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "enum": ["Asset", "Liability", "Revenue", "Expense", "Equity"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of accounts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "accountId": { "type": "string", "format": "uuid" },
                      "accountCode": { "type": "string" },
                      "accountName": { "type": "string" },
                      "currentBalance": { "type": "number" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/accounts/active/list": {
      "get": {
        "tags": ["GL - Chart of Accounts"],
        "summary": "Get all active accounts",
        "responses": {
          "200": {
            "description": "List of active accounts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "accountId": { "type": "string", "format": "uuid" },
                      "accountCode": { "type": "string" },
                      "accountName": { "type": "string" },
                      "accountType": { "type": "string" },
                      "currentBalance": { "type": "number" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/entries": {
      "post": {
        "tags": ["GL - Journal Entries"],
        "summary": "Create a new journal entry",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["entryDate", "description", "sourceModule", "sourceTransactionType", "lines"],
                "properties": {
                  "entryDate": { "type": "string", "format": "date" },
                  "description": { "type": "string", "maxLength": 500 },
                  "reference": { "type": "string", "maxLength": 100 },
                  "sourceModule": { "type": "string", "maxLength": 50 },
                  "sourceEntityId": { "type": "string", "format": "uuid" },
                  "sourceTransactionType": { "type": "string", "maxLength": 50 },
                  "autoPost": { "type": "boolean", "description": "Automatically post the entry after creation" },
                  "lines": {
                    "type": "array",
                    "minItems": 2,
                    "items": {
                      "type": "object",
                      "required": ["accountCode", "description"],
                      "properties": {
                        "accountCode": { "type": "string" },
                        "debitAmount": { "type": "number", "minimum": 0 },
                        "creditAmount": { "type": "number", "minimum": 0 },
                        "description": { "type": "string", "maxLength": 500 }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Journal entry created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "entry": {
                      "type": "object",
                      "properties": {
                        "entryId": { "type": "string", "format": "uuid" },
                        "entryNumber": { "type": "string" },
                        "entryStatus": { "type": "string" },
                        "totalDebit": { "type": "number" },
                        "totalCredit": { "type": "number" },
                        "isBalanced": { "type": "boolean" }
                      }
                    },
                    "lines": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "lineId": { "type": "string", "format": "uuid" },
                          "accountCode": { "type": "string" },
                          "accountName": { "type": "string" },
                          "debitAmount": { "type": "number" },
                          "creditAmount": { "type": "number" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["GL - Journal Entries"],
        "summary": "Get journal entries by date range",
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "endDate",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "format": "date" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of journal entries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "entryId": { "type": "string", "format": "uuid" },
                      "entryNumber": { "type": "string" },
                      "entryDate": { "type": "string", "format": "date" },
                      "description": { "type": "string" },
                      "entryStatus": { "type": "string" },
                      "totalDebit": { "type": "number" },
                      "totalCredit": { "type": "number" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/entries/search": {
      "post": {
        "tags": ["GL - Journal Entries"],
        "summary": "Search journal entries",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/entries/{entryId}": {
      "get": {
        "tags": ["GL - Journal Entries"],
        "summary": "Get journal entry by ID with lines",
        "parameters": [
          {
            "name": "entryId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Journal entry details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "entry": {
                      "type": "object",
                      "properties": {
                        "entryId": { "type": "string", "format": "uuid" },
                        "entryNumber": { "type": "string" },
                        "entryDate": { "type": "string", "format": "date" },
                        "description": { "type": "string" },
                        "entryStatus": { "type": "string" },
                        "totalDebit": { "type": "number" },
                        "totalCredit": { "type": "number" },
                        "isBalanced": { "type": "boolean" }
                      }
                    },
                    "lines": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "lineId": { "type": "string", "format": "uuid" },
                          "lineNumber": { "type": "integer" },
                          "accountCode": { "type": "string" },
                          "accountName": { "type": "string" },
                          "debitAmount": { "type": "number" },
                          "creditAmount": { "type": "number" },
                          "description": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/entries/{entryId}/post": {
      "post": {
        "tags": ["GL - Journal Entries"],
        "summary": "Post a draft journal entry",
        "parameters": [
          {
            "name": "entryId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Entry posted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "entryId": { "type": "string", "format": "uuid" },
                    "entryNumber": { "type": "string" },
                    "entryStatus": { "type": "string" },
                    "postedAt": { "type": "string", "format": "date-time" },
                    "postedBy": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/entries/{entryId}/reverse": {
      "post": {
        "tags": ["GL - Journal Entries"],
        "summary": "Reverse a posted journal entry",
        "parameters": [
          {
            "name": "entryId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["reason"],
                "properties": {
                  "reason": { "type": "string", "maxLength": 500 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Entry reversed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "original": {
                      "type": "object",
                      "properties": {
                        "entryId": { "type": "string", "format": "uuid" },
                        "entryNumber": { "type": "string" },
                        "entryStatus": { "type": "string" },
                        "reversedAt": { "type": "string", "format": "date-time" }
                      }
                    },
                    "reversal": {
                      "type": "object",
                      "properties": {
                        "entryId": { "type": "string", "format": "uuid" },
                        "entryNumber": { "type": "string" },
                        "description": { "type": "string" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/periods": {
      "post": {
        "tags": ["GL - Fiscal Periods"],
        "summary": "Create a new fiscal period",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["fiscalYear", "periodNumber", "periodName", "startDate", "endDate"],
                "properties": {
                  "fiscalYear": { "type": "integer", "minimum": 2000, "maximum": 2100 },
                  "periodNumber": { "type": "integer", "minimum": 1, "maximum": 12 },
                  "periodName": { "type": "string", "maxLength": 50 },
                  "startDate": { "type": "string", "format": "date" },
                  "endDate": { "type": "string", "format": "date" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Fiscal period created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "periodId": { "type": "string", "format": "uuid" },
                    "fiscalYear": { "type": "integer" },
                    "periodNumber": { "type": "integer" },
                    "periodName": { "type": "string" },
                    "status": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["GL - Fiscal Periods"],
        "summary": "Get all fiscal periods",
        "responses": {
          "200": {
            "description": "List of fiscal periods",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "periodId": { "type": "string", "format": "uuid" },
                      "fiscalYear": { "type": "integer" },
                      "periodNumber": { "type": "integer" },
                      "periodName": { "type": "string" },
                      "startDate": { "type": "string", "format": "date" },
                      "endDate": { "type": "string", "format": "date" },
                      "status": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/periods/{periodId}": {
      "get": {
        "tags": ["GL - Fiscal Periods"],
        "summary": "Get fiscal period by ID",
        "parameters": [
          {
            "name": "periodId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Fiscal period details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "periodId": { "type": "string", "format": "uuid" },
                    "fiscalYear": { "type": "integer" },
                    "periodNumber": { "type": "integer" },
                    "periodName": { "type": "string" },
                    "startDate": { "type": "string", "format": "date" },
                    "endDate": { "type": "string", "format": "date" },
                    "status": { "type": "string" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/periods/{periodId}/close": {
      "post": {
        "tags": ["GL - Fiscal Periods"],
        "summary": "Close a fiscal period",
        "parameters": [
          {
            "name": "periodId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Period closed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "periodId": { "type": "string", "format": "uuid" },
                    "status": { "type": "string" },
                    "closedAt": { "type": "string", "format": "date-time" },
                    "closedBy": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/periods/year/{fiscalYear}": {
      "get": {
        "tags": ["GL - Fiscal Periods"],
        "summary": "Get fiscal periods by year",
        "parameters": [
          {
            "name": "fiscalYear",
            "in": "path",
            "required": true,
            "schema": { "type": "integer", "minimum": 2000, "maximum": 2100 }
          }
        ],
        "responses": {
          "200": {
            "description": "List of fiscal periods for the year",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "periodId": { "type": "string", "format": "uuid" },
                      "periodNumber": { "type": "integer" },
                      "periodName": { "type": "string" },
                      "startDate": { "type": "string", "format": "date" },
                      "endDate": { "type": "string", "format": "date" },
                      "status": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/periods/current/active": {
      "get": {
        "tags": ["GL - Fiscal Periods"],
        "summary": "Get the current active fiscal period",
        "responses": {
          "200": {
            "description": "Current fiscal period",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "periodId": { "type": "string", "format": "uuid" },
                    "fiscalYear": { "type": "integer" },
                    "periodNumber": { "type": "integer" },
                    "periodName": { "type": "string" },
                    "startDate": { "type": "string", "format": "date" },
                    "endDate": { "type": "string", "format": "date" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/reports/trial-balance": {
      "get": {
        "tags": ["GL - Reports"],
        "summary": "Generate trial balance report",
        "parameters": [
          {
            "name": "asOfDate",
            "in": "query",
            "required": false,
            "schema": { "type": "string", "format": "date" },
            "description": "As-of date for the report (defaults to current date)"
          }
        ],
        "responses": {
          "200": {
            "description": "Trial balance report",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "accountCode": { "type": "string" },
                          "accountName": { "type": "string" },
                          "accountType": { "type": "string" },
                          "debitBalance": { "type": "number" },
                          "creditBalance": { "type": "number" }
                        }
                      }
                    },
                    "totalDebit": { "type": "number" },
                    "totalCredit": { "type": "number" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/reports/income-statement": {
      "get": {
        "tags": ["GL - Reports"],
        "summary": "Generate income statement report",
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "endDate",
            "in": "query",
            "required": true,
            "schema": { "type": "string", "format": "date" }
          }
        ],
        "responses": {
          "200": {
            "description": "Income statement report",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "revenue": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "accountCode": { "type": "string" },
                          "accountName": { "type": "string" },
                          "amount": { "type": "number" }
                        }
                      }
                    },
                    "expenses": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "accountCode": { "type": "string" },
                          "accountName": { "type": "string" },
                          "amount": { "type": "number" }
                        }
                      }
                    },
                    "totalRevenue": { "type": "number" },
                    "totalExpenses": { "type": "number" },
                    "netIncome": { "type": "number" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gl/reports/balance-sheet": {
      "get": {
        "tags": ["GL - Reports"],
        "summary": "Generate balance sheet report",
        "parameters": [
          {
            "name": "asOfDate",
            "in": "query",
            "required": false,
            "schema": { "type": "string", "format": "date" },
            "description": "As-of date for the report (defaults to current date)"
          }
        ],
        "responses": {
          "200": {
            "description": "Balance sheet report",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "assets": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "accountCode": { "type": "string" },
                          "accountName": { "type": "string" },
                          "amount": { "type": "number" }
                        }
                      }
                    },
                    "liabilities": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "accountCode": { "type": "string" },
                          "accountName": { "type": "string" },
                          "amount": { "type": "number" }
                        }
                      }
                    },
                    "equity": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "accountCode": { "type": "string" },
                          "accountName": { "type": "string" },
                          "amount": { "type": "number" }
                        }
                      }
                    },
                    "totalAssets": { "type": "number" },
                    "totalLiabilities": { "type": "number" },
                    "totalEquity": { "type": "number" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/wallet/members/{memberId}/wallet": {
      "get": {
        "tags": ["Wallet - Member"],
        "summary": "Get wallet summary for a member",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet summary",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletSummary" }
              }
            }
          },
          "404": { "description": "Member or wallet not found" }
        }
      }
    },
    "/api/wallet/my-wallet": {
      "get": {
        "tags": ["Wallet - Member"],
        "summary": "Get wallet summary for logged-in member",
        "responses": {
          "200": {
            "description": "Wallet summary",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletSummary" }
              }
            }
          },
          "404": { "description": "Wallet not found" }
        }
      }
    },
    "/api/wallet/members/{memberId}/wallet/transactions": {
      "get": {
        "tags": ["Wallet - Member"],
        "summary": "Get wallet transaction history",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "type",
            "in": "query",
            "schema": { "type": "string", "enum": ["Deposit", "Debit", "Refund", "Adjustment"] }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["Pending", "Completed", "Failed", "Reversed"] }
          },
          {
            "name": "startDate",
            "in": "query",
            "schema": { "type": "string", "format": "date-time" }
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": { "type": "string", "format": "date-time" }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction history",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "transactions": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/WalletTransaction" }
                    },
                    "total": { "type": "integer" },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/wallet/members/{memberId}/wallet/deposit-requests": {
      "post": {
        "tags": ["Wallet - Deposits"],
        "summary": "Request a wallet deposit",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["amount", "collectionDate"],
                "properties": {
                  "amount": { "type": "number", "minimum": 0.01, "description": "Deposit amount" },
                  "collectionDate": { "type": "string", "format": "date-time", "description": "Date of cash collection" },
                  "notes": { "type": "string", "maxLength": 500, "description": "Optional notes" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Deposit request created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletDepositRequest" }
              }
            }
          },
          "400": { "description": "Invalid request" },
          "404": { "description": "Member or wallet not found" }
        }
      },
      "get": {
        "tags": ["Wallet - Deposits"],
        "summary": "Get member's deposit requests",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["Draft", "PendingApproval", "Approved", "Rejected"] }
          }
        ],
        "responses": {
          "200": {
            "description": "List of deposit requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "requests": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/WalletDepositRequest" }
                    },
                    "total": { "type": "integer" },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/wallet/deposit-requests/{requestId}/submit": {
      "post": {
        "tags": ["Wallet - Deposits"],
        "summary": "Submit deposit request for approval",
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Deposit request submitted for approval",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletDepositRequest" }
              }
            }
          },
          "400": { "description": "Invalid request status" },
          "404": { "description": "Deposit request not found" }
        }
      }
    },
    "/api/wallet/members/{memberId}/wallet/debit-requests": {
      "get": {
        "tags": ["Wallet - Debits"],
        "summary": "Get member's debit requests",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["PendingAcknowledgment", "Acknowledged", "Completed", "Invalidated", "Failed"] }
          }
        ],
        "responses": {
          "200": {
            "description": "List of debit requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "requests": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/WalletDebitRequest" }
                    },
                    "total": { "type": "integer" },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Wallet - Debits"],
        "summary": "Create a debit request for a member",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["amount", "purpose"],
                "properties": {
                  "amount": { "type": "number", "minimum": 0.01, "description": "Debit amount" },
                  "purpose": { "type": "string", "minLength": 1, "maxLength": 255, "description": "Purpose of debit" },
                  "contributionCycleId": { "type": "string", "format": "uuid", "description": "Optional contribution cycle reference" },
                  "contributionId": { "type": "string", "format": "uuid", "description": "Optional contribution reference" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Debit request created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletDebitRequest" }
              }
            }
          },
          "400": { "description": "Invalid request or insufficient balance" },
          "404": { "description": "Member or wallet not found" }
        }
      }
    },
    "/api/wallet/debit-requests/pending": {
      "get": {
        "tags": ["Wallet - Debits"],
        "summary": "Get pending acknowledgment requests",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "agentId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of pending debit requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "requests": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/WalletDebitRequest" }
                    },
                    "total": { "type": "integer" },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/wallet/debit-requests/{debitRequestId}/acknowledge": {
      "post": {
        "tags": ["Wallet - Debits"],
        "summary": "Acknowledge a debit request",
        "deprecated": true,
        "description": "DEPRECATED: This endpoint is deprecated when wallet.autoDebitEnabled is true (default). With auto-debit enabled, wallet debits are processed automatically without agent acknowledgment. This endpoint only works when auto-debit is disabled via system configuration.",
        "parameters": [
          {
            "name": "debitRequestId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Debit request acknowledged",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletDebitRequest" }
              }
            }
          },
          "400": { "description": "Invalid request status" },
          "404": { "description": "Debit request not found" }
        }
      }
    },
    "/api/wallet/debit-requests/{debitRequestId}/invalidate": {
      "post": {
        "tags": ["Wallet - Debits"],
        "summary": "Invalidate a debit request",
        "parameters": [
          {
            "name": "debitRequestId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Debit request invalidated",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletDebitRequest" }
              }
            }
          },
          "400": { "description": "Invalid request status" },
          "404": { "description": "Debit request not found" }
        }
      }
    },
    "/api/wallet/admin/deposits/pending": {
      "get": {
        "tags": ["Wallet - Admin"],
        "summary": "Get all pending deposit requests",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "collectedBy",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of pending deposit requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "requests": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/WalletDepositRequest" }
                    },
                    "total": { "type": "integer" },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/wallet/admin/wallets": {
      "get": {
        "tags": ["Wallet - Admin"],
        "summary": "Get all wallets (admin)",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "minBalance",
            "in": "query",
            "schema": { "type": "number" }
          },
          {
            "name": "maxBalance",
            "in": "query",
            "schema": { "type": "number" }
          },
          {
            "name": "search",
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of wallets",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "wallets": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/WalletWithMember" }
                    },
                    "total": { "type": "integer" },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/wallet/admin/wallets/statistics": {
      "get": {
        "tags": ["Wallet - Admin"],
        "summary": "Get wallet statistics",
        "responses": {
          "200": {
            "description": "Wallet statistics",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletStatistics" }
              }
            }
          }
        }
      }
    },
    "/api/wallet/admin/wallets/low-balance": {
      "get": {
        "tags": ["Wallet - Admin"],
        "summary": "Get low balance wallets",
        "parameters": [
          {
            "name": "threshold",
            "in": "query",
            "schema": { "type": "number", "default": 200, "description": "Balance threshold" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          }
        ],
        "responses": {
          "200": {
            "description": "List of low balance wallets",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "wallets": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/WalletWithMember" }
                    },
                    "total": { "type": "integer" },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/wallet/admin/wallets/{walletId}": {
      "get": {
        "tags": ["Wallet - Admin"],
        "summary": "Get wallet details by ID",
        "parameters": [
          {
            "name": "walletId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/WalletWithMember" }
              }
            }
          },
          "404": { "description": "Wallet not found" }
        }
      }
    },
    "/api/wallet/admin/wallets/{walletId}/adjust": {
      "post": {
        "tags": ["Wallet - Admin"],
        "summary": "Manual wallet adjustment",
        "parameters": [
          {
            "name": "walletId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["amount", "adjustmentType", "reason"],
                "properties": {
                  "amount": { "type": "number", "minimum": 0.01, "description": "Adjustment amount" },
                  "adjustmentType": { "type": "string", "enum": ["credit", "debit"], "description": "Type of adjustment" },
                  "reason": { "type": "string", "minLength": 1, "maxLength": 500, "description": "Reason for adjustment" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Wallet adjusted successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Wallet" }
              }
            }
          },
          "400": { "description": "Invalid adjustment or insufficient balance" },
          "404": { "description": "Wallet not found" }
        }
      }
    }
    ,
    "ApprovalWorkflow": {
      "type": "object",
      "properties": {
        "workflowId": { "type": "string" },
        "workflowCode": { "type": "string" },
        "workflowName": { "type": "string" },
        "description": { "type": "string", "nullable": true },
        "module": { "type": "string" },
        "entityType": { "type": "string" },
        "isActive": { "type": "boolean" },
        "requiresAllStages": { "type": "boolean" },
        "createdAt": { "type": "string", "format": "date-time" }
      }
    },
    "ApprovalStage": {
      "type": "object",
      "description": "Approval workflow stage",
      "properties": {
        "stageId": { 
          "type": "string", 
          "format": "uuid",
          "description": "Unique stage identifier"
        },
        "workflowId": { 
          "type": "string", 
          "format": "uuid",
          "description": "Parent workflow ID"
        },
        "stageName": { 
          "type": "string",
          "description": "Display name of the stage"
        },
        "stageOrder": { 
          "type": "integer",
          "description": "Sequential order (1, 2, 3...)"
        },
        "approverType": { 
          "type": "string",
          "enum": ["SpecificUser", "Role", "Dynamic"],
          "description": "Type of approver for this stage"
        },
        "roleId": { 
          "type": "string", 
          "format": "uuid",
          "nullable": true,
          "description": "Role ID if approverType is Role"
        },
        "userId": { 
          "type": "string", 
          "format": "uuid",
          "nullable": true,
          "description": "User ID if approverType is SpecificUser"
        },
        "organizationBody": { 
          "type": "string",
          "enum": ["Forum", "Area", "Unit"],
          "nullable": true,
          "description": "Organization level for role-based approval"
        },
        "isOptional": { 
          "type": "boolean",
          "description": "Whether this stage can be skipped"
        },
        "autoApprove": { 
          "type": "boolean",
          "description": "Whether to automatically approve this stage"
        },
        "createdAt": { 
          "type": "string", 
          "format": "date-time" 
        },
        "updatedAt": { 
          "type": "string", 
          "format": "date-time",
          "nullable": true
        }
      }
    },
    "ApprovalWorkflowsSearchResponse": {
      "type": "object",
      "properties": {
        "items": { "type": "array", "items": { "$ref": "#/components/schemas/ApprovalWorkflow" } },
        "total": { "type": "integer" },
        "page": { "type": "integer" },
        "pageSize": { "type": "integer" },
        "totalPages": { "type": "integer" }
      }
    },
    "ApprovalRequest": {
      "type": "object",
      "properties": {
        "requestId": { "type": "string" },
        "workflowId": { "type": "string" },
        "entityType": { "type": "string" },
        "entityId": { "type": "string" },
        "forumId": { "type": ["string", "null"] },
        "areaId": { "type": ["string", "null"] },
        "unitId": { "type": ["string", "null"] },
        "requestedBy": { "type": "string" },
        "requestedAt": { "type": "string", "format": "date-time" },
        "status": { "type": "string" }
      }
    },
    "ApprovalRequestsSearchResponse": {
      "type": "object",
      "properties": {
        "items": { "type": "array", "items": { "$ref": "#/components/schemas/ApprovalRequest" } },
        "total": { "type": "integer" },
        "page": { "type": "integer" },
        "pageSize": { "type": "integer" },
        "totalPages": { "type": "integer" }
      }
    },
    "/api/death-claims/report": {
      "post": {
        "tags": ["Death Claims"],
        "summary": "Report a new death claim",
        "description": "Creates a new death claim for a deceased member",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["memberId", "deathDate"],
                "properties": {
                  "memberId": { "type": "string", "format": "uuid" },
                  "deathDate": { "type": "string", "format": "date" },
                  "deathPlace": { "type": "string" },
                  "causeOfDeath": { "type": "string" },
                  "initialNotes": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Death claim created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/DeathClaim" }
                  }
                }
              }
            }
          },
          "400": { "description": "Invalid request or business rule violation" },
          "404": { "description": "Member not found" }
        }
      }
    },
    "/api/death-claims/{claimId}/documents": {
      "post": {
        "tags": ["Death Claims"],
        "summary": "Upload a claim document",
        "description": "Uploads a supporting document for a death claim",
        "parameters": [
          {
            "name": "claimId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["documentType", "documentName", "fileBuffer", "mimeType"],
                "properties": {
                  "documentType": {
                    "type": "string",
                    "enum": ["DeathCertificate", "NewspaperClipping", "PoliceReport", "MedicalReport", "PostMortemReport", "Other"]
                  },
                  "documentName": { "type": "string" },
                  "fileBuffer": { "type": "string", "description": "Base64 encoded file content" },
                  "mimeType": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Document uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/DeathClaimDocument" }
                  }
                }
              }
            }
          },
          "400": { "description": "Invalid file or claim status" },
          "404": { "description": "Claim not found" }
        }
      },
      "get": {
        "tags": ["Death Claims"],
        "summary": "Get claim documents",
        "description": "Retrieves all documents for a death claim",
        "parameters": [
          {
            "name": "claimId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Documents retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/DeathClaimDocument" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/death-claims/{claimId}/verify": {
      "post": {
        "tags": ["Death Claims"],
        "summary": "Verify claim documents",
        "description": "Verifies all uploaded documents and marks claim as ready for approval",
        "parameters": [
          {
            "name": "claimId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "verificationNotes": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Documents verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/DeathClaim" }
                  }
                }
              }
            }
          },
          "400": { "description": "Invalid claim status or missing documents" },
          "404": { "description": "Claim not found" }
        }
      }
    },
    "/api/death-claims/{claimId}/submit": {
      "post": {
        "tags": ["Death Claims"],
        "summary": "Submit claim for approval",
        "description": "Submits a verified claim to the approval workflow",
        "parameters": [
          {
            "name": "claimId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Claim submitted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/DeathClaim" }
                  }
                }
              }
            }
          },
          "400": { "description": "Claim not verified" },
          "404": { "description": "Claim not found" }
        }
      }
    },
    "/api/death-claims/{claimId}/settle": {
      "post": {
        "tags": ["Death Claims"],
        "summary": "Settle an approved claim",
        "description": "Records payment to nominee and creates GL entry",
        "parameters": [
          {
            "name": "claimId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["paymentMethod", "paymentDate"],
                "properties": {
                  "paymentMethod": {
                    "type": "string",
                    "enum": ["Cash", "BankTransfer", "Cheque"]
                  },
                  "paymentReference": { "type": "string" },
                  "paymentDate": { "type": "string", "format": "date" },
                  "acknowledgmentFileBuffer": { "type": "string", "description": "Base64 encoded acknowledgment file" },
                  "acknowledgmentFileName": { "type": "string" },
                  "acknowledgmentMimeType": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Claim settled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/DeathClaim" }
                  }
                }
              }
            }
          },
          "400": { "description": "Claim not approved" },
          "404": { "description": "Claim not found" }
        }
      }
    },
    "/api/death-claims/{claimId}": {
      "get": {
        "tags": ["Death Claims"],
        "summary": "Get claim details",
        "description": "Retrieves details of a specific death claim",
        "parameters": [
          {
            "name": "claimId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Claim details retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/DeathClaim" }
                  }
                }
              }
            }
          },
          "404": { "description": "Claim not found" }
        }
      }
    },
    "/api/death-claims/dashboard/stats": {
      "get": {
        "tags": ["Death Claims"],
        "summary": "Get dashboard statistics",
        "description": "Returns global statistics for death claims dashboard",
        "responses": {
          "200": {
            "description": "Statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "pendingVerification": { "type": "integer" },
                        "underContribution": { "type": "integer" },
                        "approvedForPayout": { "type": "integer" },
                        "totalThisYear": { "type": "integer" },
                        "totalBenefitsPaidYTD": { "type": "number" },
                        "pendingCollections": { "type": "number" },
                        "successRate": { "type": "integer", "description": "Percentage of approved claims" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/death-claims/requiring-action": {
      "get": {
        "tags": ["Death Claims"],
        "summary": "Get claims requiring immediate action",
        "description": "Returns claims with UnderVerification status",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 50, "maximum": 100 }
          }
        ],
        "responses": {
          "200": {
            "description": "Claims retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/DeathClaim" }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": { "type": "integer" },
                        "limit": { "type": "integer" },
                        "total": { "type": "integer" },
                        "totalPages": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/death-claims/search": {
      "post": {
        "tags": ["Death Claims"],
        "summary": "Advanced search for death claims",
        "description": "Search death claims using advanced filters, sorting, and pagination",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SearchRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/SearchResponse" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/death-claims/{claimId}/documents/{documentId}/verify": {
      "post": {
        "tags": ["Death Claims"],
        "summary": "Verify individual document",
        "description": "Verify or reject a single document. Updates claim status to Verified when all documents are verified.",
        "parameters": [
          {
            "name": "claimId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "documentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["verificationStatus"],
                "properties": {
                  "verificationStatus": {
                    "type": "string",
                    "enum": ["Verified", "Rejected"]
                  },
                  "notes": { "type": "string" },
                  "rejectionReason": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Document verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/DeathClaimDocument" }
                  }
                }
              }
            }
          },
          "404": { "description": "Document or claim not found" }
        }
      }
    },
    "/api/death-claims/{claimId}/documents/{documentId}/download": {
      "get": {
        "tags": ["Death Claims"],
        "summary": "Download claim document",
        "description": "Streams the document file directly",
        "parameters": [
          {
            "name": "claimId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "documentId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "File download",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "404": { "description": "Document or claim not found" }
        }
      }
    },
    "/api/death-claims": {
      "get": {
        "tags": ["Death Claims"],
        "summary": "List death claims",
        "description": "Lists death claims with optional filters",
        "parameters": [
          {
            "name": "claimStatus",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["Reported", "UnderVerification", "Verified", "PendingApproval", "Approved", "Settled", "Rejected"]
            }
          },
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "areaId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "unitId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "agentId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20, "maximum": 100 }
          }
        ],
        "responses": {
          "200": {
            "description": "Claims retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/DeathClaim" }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": { "type": "integer" },
                        "limit": { "type": "integer" },
                        "total": { "type": "integer" },
                        "totalPages": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/members/{memberId}/benefit": {
      "get": {
        "tags": ["Members"],
        "summary": "Get member's death benefit amount",
        "description": "Returns the death benefit amount from member's tier",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Benefit amount retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "memberId": { "type": "string", "format": "uuid" },
                        "memberCode": { "type": "string" },
                        "memberName": { "type": "string" },
                        "tierId": { "type": "string", "format": "uuid" },
                        "tierName": { "type": "string" },
                        "deathBenefit": { "type": "number" }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": { "description": "Member not found" }
        }
      }
    },
    "/api/contributions/cycles/summary": {
      "get": {
        "tags": ["Contributions"],
        "summary": "Get active cycles summary for admin dashboard",
        "description": "Returns aggregated statistics for all active contribution cycles",
        "responses": {
          "200": {
            "description": "Summary retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/ActiveCyclesSummary" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/contributions/my-contributions/summary": {
      "get": {
        "tags": ["Contributions"],
        "summary": "Get authenticated member's contribution summary",
        "description": "Returns contribution summary for the currently logged-in member. If user is not a member, returns empty summary.",
        "responses": {
          "200": {
            "description": "Summary retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/MyContributionsSummary" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/contributions/my-contributions/pending": {
      "get": {
        "tags": ["Contributions"],
        "summary": "Get authenticated member's pending contributions",
        "description": "Returns list of pending contributions for the currently logged-in member with cycle, deceased member, and agent details.",
        "responses": {
          "200": {
            "description": "Pending contributions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "pendingContributions": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/MyPendingContribution" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/contributions/my-contributions/history": {
      "get": {
        "tags": ["Contributions"],
        "summary": "Get authenticated member's contribution history",
        "description": "Returns paginated contribution history for the currently logged-in member.",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["Pending", "WalletDebitRequested", "Acknowledged", "Collected", "Missed", "Exempted"]
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20 }
          }
        ],
        "responses": {
          "200": {
            "description": "Contribution history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "contributions": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/MemberContributionWithRelations" }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": { "type": "integer" },
                            "limit": { "type": "integer" },
                            "total": { "type": "integer" },
                            "totalPages": { "type": "integer" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/contributions/cycles/{cycleId}/contributions": {
      "get": {
        "tags": ["Contributions"],
        "summary": "Get contributions in a cycle with filters",
        "description": "Returns paginated list of member contributions for a specific cycle with optional filters.",
        "parameters": [
          {
            "name": "cycleId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["Pending", "WalletDebitRequested", "Acknowledged", "Collected", "Missed", "Exempted"]
            }
          },
          {
            "name": "agentId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "searchTerm",
            "in": "query",
            "description": "Search by member name or member code",
            "schema": { "type": "string" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20 }
          }
        ],
        "responses": {
          "200": {
            "description": "Contributions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "contributions": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/MemberContributionWithRelations" }
                        },
                        "total": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": { "description": "Cycle not found" }
        }
      }
    },
    "/api/contributions/cycles/{cycleId}": {
      "get": {
        "tags": ["Contributions"],
        "summary": "Get contribution cycle by ID",
        "parameters": [
          {
            "name": "cycleId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Cycle retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/ContributionCycle" }
                  }
                }
              }
            }
          },
          "404": { "description": "Cycle not found" }
        }
      }
    },
    "/api/contributions/cycles/search": {
      "post": {
        "tags": ["Contributions"],
        "summary": "Search contribution cycles",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SearchRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SearchResponse" }
              }
            }
          }
        }
      }
    },
    "/api/contributions/cycles/{cycleId}/close": {
      "post": {
        "tags": ["Contributions"],
        "summary": "Close a contribution cycle",
        "parameters": [
          {
            "name": "cycleId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Cycle closed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/ContributionCycle" }
                  }
                }
              }
            }
          },
          "404": { "description": "Cycle not found" }
        }
      }
    },
    "/api/contributions/{contributionId}": {
      "get": {
        "tags": ["Contributions"],
        "summary": "Get contribution by ID with full relations",
        "description": "Returns contribution details with nested cycle, member, and agent information",
        "parameters": [
          {
            "name": "contributionId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Contribution retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/MemberContributionWithRelations" }
                  }
                }
              }
            }
          },
          "404": { "description": "Contribution not found" }
        }
      }
    },
    "/api/contributions/{contributionId}/acknowledge": {
      "post": {
        "tags": ["Contributions"],
        "summary": "Acknowledge wallet debit for contribution",
        "deprecated": true,
        "description": "DEPRECATED: This endpoint is deprecated when wallet.autoDebitEnabled is true (default). With auto-debit enabled, contributions are collected automatically from wallets without agent acknowledgment. This endpoint only works when auto-debit is disabled via system configuration.",
        "parameters": [
          {
            "name": "contributionId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Contribution acknowledged successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/MemberContribution" }
                  }
                }
              }
            }
          },
          "403": { "description": "Only assigned agent can acknowledge" },
          "404": { "description": "Contribution not found" }
        }
      }
    },
    "/api/contributions/{contributionId}/record-cash": {
      "post": {
        "tags": ["Contributions"],
        "summary": "Record direct cash contribution",
        "parameters": [
          {
            "name": "contributionId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "cashReceiptReference": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cash contribution recorded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/MemberContribution" }
                  }
                }
              }
            }
          },
          "403": { "description": "Only assigned agent can record" },
          "404": { "description": "Contribution not found" }
        }
      }
    },
    "/api/contributions/{contributionId}/mark-missed": {
      "post": {
        "tags": ["Contributions"],
        "summary": "Mark contribution as missed",
        "parameters": [
          {
            "name": "contributionId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Contribution marked as missed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/MemberContribution" }
                  }
                }
              }
            }
          },
          "404": { "description": "Contribution not found" }
        }
      }
    },
    "/api/contributions/search": {
      "post": {
        "tags": ["Contributions"],
        "summary": "Search member contributions",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SearchRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SearchResponse" }
              }
            }
          }
        }
      }
    },
    "/api/contributions/member/{memberId}/history": {
      "get": {
        "tags": ["Contributions"],
        "summary": "Get member's contribution history with relations",
        "description": "Returns paginated contribution history for a specific member with nested cycle, member, and agent details",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["Pending", "WalletDebitRequested", "Acknowledged", "Collected", "Missed", "Exempted"]
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20 }
          }
        ],
        "responses": {
          "200": {
            "description": "Contribution history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "contributions": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/MemberContributionWithRelations" }
                        },
                        "total": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },

    "/api/cash-management/custody/me": {
      "get": {
        "tags": ["Cash Management - Custody"],
        "summary": "Get current user's cash custody",
        "description": "Returns the cash custody record for the authenticated user",
        "responses": {
          "200": {
            "description": "Cash custody retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashCustody" }
                  }
                }
              }
            }
          },
          "404": { "description": "No cash custody record found for current user" }
        }
      }
    },
    "/api/cash-management/custody/summary/{glAccountCode}": {
      "get": {
        "tags": ["Cash Management - Custody"],
        "summary": "Get custody summary by GL account code",
        "description": "Returns aggregated custody summary for a specific GL account (1001-1004)",
        "parameters": [
          {
            "name": "glAccountCode",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "pattern": "^100[1-4]$" },
            "description": "GL Account Code (1001=Agent, 1002=UnitAdmin, 1003=AreaAdmin, 1004=ForumAdmin)"
          }
        ],
        "responses": {
          "200": {
            "description": "Custody summary retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashCustodySummary" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/custody/user/{userId}": {
      "get": {
        "tags": ["Cash Management - Custody"],
        "summary": "Get custody by user ID",
        "description": "Returns the cash custody record for a specific user (Admin only)",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Cash custody retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashCustodyWithRelations" }
                  }
                }
              }
            }
          },
          "404": { "description": "Cash custody not found" }
        }
      }
    },
    "/api/cash-management/custody/{custodyId}": {
      "get": {
        "tags": ["Cash Management - Custody"],
        "summary": "Get custody by ID",
        "description": "Returns a specific cash custody record by its ID",
        "parameters": [
          {
            "name": "custodyId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Cash custody retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashCustodyWithRelations" }
                  }
                }
              }
            }
          },
          "404": { "description": "Cash custody not found" }
        }
      }
    },
    "/api/cash-management/custodies": {
      "get": {
        "tags": ["Cash Management - Custody"],
        "summary": "List all custodies with filters",
        "description": "Returns paginated list of cash custodies with optional filters (Admin only)",
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "userRole",
            "in": "query",
            "schema": { "type": "string", "enum": ["Agent", "UnitAdmin", "AreaAdmin", "ForumAdmin"] }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["Active", "Inactive", "Suspended"] }
          },
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "areaId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "unitId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20, "maximum": 100 }
          }
        ],
        "responses": {
          "200": {
            "description": "Custodies retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "custodies": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/CashCustodyWithRelations" }
                        },
                        "total": { "type": "integer" },
                        "page": { "type": "integer" },
                        "limit": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/handovers/pending/me": {
      "get": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Get pending handovers for current user",
        "description": "Returns handovers where current user is the receiver and status is Initiated",
        "responses": {
          "200": {
            "description": "Pending handovers retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/CashHandoverWithRelations" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/handovers/pending/super-admin": {
      "get": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Get pending bank deposits",
        "description": "Returns handovers to SuperAdmin pending acknowledgment for bank deposit (SuperAdmin only)",
        "responses": {
          "200": {
            "description": "Pending bank deposits retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/CashHandoverWithRelations" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/handovers/receivers": {
      "get": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Get valid receivers for current user",
        "description": "Returns list of users who can receive cash handovers from the current user based on hierarchy",
        "responses": {
          "200": {
            "description": "Valid receivers retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ValidReceiver" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/handovers/my-initiated": {
      "get": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Get handovers initiated by current user",
        "description": "Returns all handovers where current user is the initiator",
        "responses": {
          "200": {
            "description": "Initiated handovers retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/CashHandoverWithRelations" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/handovers": {
      "get": {
        "tags": ["Cash Management - Handovers"],
        "summary": "List all handovers with filters",
        "description": "Returns paginated list of cash handovers with optional filters (Admin only)",
        "parameters": [
          {
            "name": "fromUserId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "toUserId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["Initiated", "Acknowledged", "Rejected", "Cancelled"] }
          },
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "requiresApproval",
            "in": "query",
            "schema": { "type": "boolean" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20, "maximum": 100 }
          }
        ],
        "responses": {
          "200": {
            "description": "Handovers retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "handovers": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/CashHandoverWithRelations" }
                        },
                        "total": { "type": "integer" },
                        "page": { "type": "integer" },
                        "limit": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Initiate a new cash handover",
        "description": "Creates a new cash handover from current user to specified receiver",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/InitiateHandoverRequest" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Handover initiated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashHandover" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": { "description": "Invalid request or insufficient balance" },
          "403": { "description": "Invalid receiver for current user's role" }
        }
      }
    },
    "/api/cash-management/handovers/{handoverId}": {
      "get": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Get handover by ID",
        "description": "Returns a specific cash handover record by its ID",
        "parameters": [
          {
            "name": "handoverId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Handover retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashHandoverWithRelations" }
                  }
                }
              }
            }
          },
          "404": { "description": "Handover not found" }
        }
      }
    },
    "/api/cash-management/handovers/{handoverId}/acknowledge": {
      "post": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Acknowledge a cash handover",
        "description": "Receiver acknowledges receipt of cash. Creates GL entries and updates custody balances.",
        "parameters": [
          {
            "name": "handoverId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "receiverNotes": { "type": "string", "maxLength": 500 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Handover acknowledged successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashHandover" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": { "description": "Handover not in Initiated status" },
          "403": { "description": "Only receiver can acknowledge" }
        }
      }
    },
    "/api/cash-management/handovers/{handoverId}/reject": {
      "post": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Reject a cash handover",
        "description": "Receiver rejects the handover with a reason. Returns funds to initiator's custody.",
        "parameters": [
          {
            "name": "handoverId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["rejectionReason"],
                "properties": {
                  "rejectionReason": { "type": "string", "minLength": 5, "maxLength": 500 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Handover rejected successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashHandover" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": { "description": "Handover not in Initiated status" },
          "403": { "description": "Only receiver can reject" }
        }
      }
    },
    "/api/cash-management/handovers/{handoverId}/cancel": {
      "post": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Cancel a cash handover",
        "description": "Initiator cancels a pending handover before it's acknowledged",
        "parameters": [
          {
            "name": "handoverId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Handover cancelled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": { "$ref": "#/components/schemas/CashHandover" },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": { "description": "Handover not in Initiated status" },
          "403": { "description": "Only initiator can cancel" }
        }
      }
    },
    "/api/cash-management/custody/me/activity": {
      "get": {
        "tags": ["Cash Management - Custody"],
        "summary": "Get current user's custody activity",
        "description": "Returns activity log for the current user's cash custody (stub - returns empty array)",
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20 }
          }
        ],
        "responses": {
          "200": {
            "description": "Custody activity retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "activities": { "type": "array", "items": { "type": "object" } },
                        "total": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/handovers/history": {
      "get": {
        "tags": ["Cash Management - Handovers"],
        "summary": "Get handover history for current user",
        "description": "Returns paginated history of handovers where current user was initiator or receiver",
        "parameters": [
          {
            "name": "role",
            "in": "query",
            "schema": { "type": "string", "enum": ["initiator", "receiver", "all"] },
            "description": "Filter by user's role in handover"
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["Initiated", "Acknowledged", "Rejected", "Cancelled"] }
          },
          {
            "name": "startDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "endDate",
            "in": "query",
            "schema": { "type": "string", "format": "date" }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20 }
          }
        ],
        "responses": {
          "200": {
            "description": "Handover history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "handovers": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/CashHandoverWithRelations" }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": { "type": "integer" },
                            "limit": { "type": "integer" },
                            "total": { "type": "integer" },
                            "totalPages": { "type": "integer" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/admin/dashboard": {
      "get": {
        "tags": ["Cash Management - Admin"],
        "summary": "Get admin dashboard statistics",
        "description": "Returns aggregated statistics for cash management dashboard (Admin only)",
        "parameters": [
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" },
            "description": "Filter by forum (Super Admin only)"
          },
          {
            "name": "areaId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" },
            "description": "Filter by area"
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "summary": {
                          "type": "object",
                          "properties": {
                            "totalCash": { "type": "number" },
                            "bankBalance": { "type": "number" },
                            "totalInCustody": { "type": "number" },
                            "pendingHandovers": { "type": "integer" },
                            "pendingHandoverAmount": { "type": "number" }
                          }
                        },
                        "byLevel": {
                          "type": "object",
                          "additionalProperties": {
                            "type": "object",
                            "properties": {
                              "count": { "type": "integer" },
                              "totalBalance": { "type": "number" },
                              "glAccountCode": { "type": "string" }
                            }
                          }
                        },
                        "alerts": {
                          "type": "object",
                          "properties": {
                            "overdueCount": { "type": "integer" },
                            "overdueAmount": { "type": "number" },
                            "overdueThresholdDays": { "type": "integer" },
                            "pendingOverdue": { "type": "integer" },
                            "pendingOverdueHours": { "type": "integer" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/admin/custody-by-level": {
      "get": {
        "tags": ["Cash Management - Admin"],
        "summary": "Get custody aggregated by hierarchy level",
        "description": "Returns cash custody totals grouped by role level (Agent, UnitAdmin, etc.)",
        "parameters": [
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "areaId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Custody by level retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "levels": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "level": { "type": "string" },
                              "glAccountCode": { "type": "string" },
                              "glAccountName": { "type": "string" },
                              "userCount": { "type": "integer" },
                              "totalBalance": { "type": "number" },
                              "glBalance": { "type": "number" },
                              "reconciled": { "type": "boolean" }
                            }
                          }
                        },
                        "totalInCustody": { "type": "number" },
                        "bankBalance": { "type": "number" },
                        "totalCash": { "type": "number" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/admin/custody-report": {
      "get": {
        "tags": ["Cash Management - Admin"],
        "summary": "Get detailed custody report by user",
        "description": "Returns paginated list of all users with cash custody and their balances",
        "parameters": [
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "areaId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "unitId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "level",
            "in": "query",
            "schema": { "type": "string", "enum": ["Agent", "UnitAdmin", "AreaAdmin", "ForumAdmin"] }
          },
          {
            "name": "minBalance",
            "in": "query",
            "schema": { "type": "number" }
          },
          {
            "name": "status",
            "in": "query",
            "schema": { "type": "string", "enum": ["Active", "Inactive"] }
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 50 }
          }
        ],
        "responses": {
          "200": {
            "description": "Custody report retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "custodies": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "custodyId": { "type": "string", "format": "uuid" },
                              "userId": { "type": "string", "format": "uuid" },
                              "userName": { "type": "string" },
                              "userRole": { "type": "string" },
                              "unitName": { "type": "string" },
                              "areaName": { "type": "string" },
                              "glAccountCode": { "type": "string" },
                              "status": { "type": "string" },
                              "currentBalance": { "type": "number" },
                              "totalReceived": { "type": "number" },
                              "totalTransferred": { "type": "number" },
                              "lastTransactionAt": { "type": "string", "format": "date-time" },
                              "daysSinceLastTransaction": { "type": "integer" },
                              "isOverdue": { "type": "boolean" }
                            }
                          }
                        },
                        "summary": {
                          "type": "object",
                          "properties": {
                            "totalUsers": { "type": "integer" },
                            "totalBalance": { "type": "number" },
                            "activeUsers": { "type": "integer" },
                            "inactiveUsers": { "type": "integer" }
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": { "type": "integer" },
                            "limit": { "type": "integer" },
                            "total": { "type": "integer" },
                            "totalPages": { "type": "integer" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/admin/overdue": {
      "get": {
        "tags": ["Cash Management - Admin"],
        "summary": "Get users holding cash beyond threshold",
        "description": "Returns list of users who haven't transferred cash within threshold days",
        "parameters": [
          {
            "name": "thresholdDays",
            "in": "query",
            "schema": { "type": "integer", "default": 7 },
            "description": "Number of days to consider overdue"
          },
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "areaId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "level",
            "in": "query",
            "schema": { "type": "string", "enum": ["Agent", "UnitAdmin", "AreaAdmin", "ForumAdmin"] }
          }
        ],
        "responses": {
          "200": {
            "description": "Overdue users retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "thresholdDays": { "type": "integer" },
                        "overdueUsers": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "custodyId": { "type": "string", "format": "uuid" },
                              "userId": { "type": "string", "format": "uuid" },
                              "userName": { "type": "string" },
                              "userRole": { "type": "string" },
                              "unitName": { "type": "string" },
                              "areaName": { "type": "string" },
                              "currentBalance": { "type": "number" },
                              "lastTransactionAt": { "type": "string", "format": "date-time" },
                              "daysSinceLastTransaction": { "type": "integer" }
                            }
                          }
                        },
                        "summary": {
                          "type": "object",
                          "properties": {
                            "totalOverdueUsers": { "type": "integer" },
                            "totalOverdueAmount": { "type": "number" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/admin/reconciliation": {
      "get": {
        "tags": ["Cash Management - Admin"],
        "summary": "Get GL reconciliation report",
        "description": "Compares custody sub-ledger totals with GL account balances",
        "parameters": [
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Reconciliation report retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "accounts": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "accountCode": { "type": "string" },
                              "accountName": { "type": "string" },
                              "glBalance": { "type": "number" },
                              "custodyTotal": { "type": "number" },
                              "difference": { "type": "number" },
                              "isReconciled": { "type": "boolean" },
                              "userCount": { "type": "integer" }
                            }
                          }
                        },
                        "summary": {
                          "type": "object",
                          "properties": {
                            "totalGlBalance": { "type": "number" },
                            "totalCustodyBalance": { "type": "number" },
                            "totalDifference": { "type": "number" },
                            "allReconciled": { "type": "boolean" }
                          }
                        },
                        "bankAccount": {
                          "type": "object",
                          "properties": {
                            "accountCode": { "type": "string" },
                            "accountName": { "type": "string" },
                            "balance": { "type": "number" }
                          }
                        },
                        "lastCheckedAt": { "type": "string", "format": "date-time" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/admin/pending-transfers": {
      "get": {
        "tags": ["Cash Management - Admin"],
        "summary": "Get all pending transfers across the organization",
        "description": "Returns all handovers in Initiated status across the organization",
        "parameters": [
          {
            "name": "forumId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "areaId",
            "in": "query",
            "schema": { "type": "string", "format": "uuid" }
          },
          {
            "name": "fromRole",
            "in": "query",
            "schema": { "type": "string", "enum": ["Agent", "UnitAdmin", "AreaAdmin", "ForumAdmin"] }
          },
          {
            "name": "toRole",
            "in": "query",
            "schema": { "type": "string", "enum": ["UnitAdmin", "AreaAdmin", "ForumAdmin", "SuperAdmin"] }
          },
          {
            "name": "minAge",
            "in": "query",
            "schema": { "type": "integer" },
            "description": "Minimum age in hours"
          },
          {
            "name": "page",
            "in": "query",
            "schema": { "type": "integer", "default": 1 }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": { "type": "integer", "default": 20 }
          }
        ],
        "responses": {
          "200": {
            "description": "Pending transfers retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "transfers": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "handoverId": { "type": "string", "format": "uuid" },
                              "handoverNumber": { "type": "string" },
                              "fromUserName": { "type": "string" },
                              "fromUserRole": { "type": "string" },
                              "fromUnit": { "type": "string", "nullable": true },
                              "toUserName": { "type": "string" },
                              "toUserRole": { "type": "string" },
                              "amount": { "type": "number" },
                              "status": { "type": "string" },
                              "requiresApproval": { "type": "boolean" },
                              "approvalStatus": { "type": "string", "nullable": true },
                              "initiatedAt": { "type": "string", "format": "date-time" },
                              "ageHours": { "type": "number" }
                            }
                          }
                        },
                        "summary": {
                          "type": "object",
                          "properties": {
                            "total": { "type": "integer" },
                            "totalAmount": { "type": "number" },
                            "requiresApproval": { "type": "integer" },
                            "overdue": { "type": "integer" }
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": { "type": "integer" },
                            "limit": { "type": "integer" },
                            "total": { "type": "integer" },
                            "totalPages": { "type": "integer" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cash-management/admin/handovers/{handoverId}/approve": {
      "post": {
        "tags": ["Cash Management - Admin"],
        "summary": "Approve bank deposit (SuperAdmin only)",
        "description": "Approves a bank deposit handover that requires approval before acknowledgment",
        "parameters": [
          {
            "name": "handoverId",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "approverNotes": { "type": "string", "maxLength": 500 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bank deposit approved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "handoverId": { "type": "string", "format": "uuid" },
                        "handoverNumber": { "type": "string" },
                        "status": { "type": "string" },
                        "approvalStatus": { "type": "string" },
                        "approvedAt": { "type": "string", "format": "date-time" },
                        "approvedBy": { "type": "string", "format": "uuid" }
                      }
                    },
                    "message": { "type": "string" }
                  }
                }
              }
            }
          },
          "400": { "description": "Handover doesn't require approval or already approved" },
          "403": { "description": "Only SuperAdmin can approve bank deposits" },
          "404": { "description": "Handover not found" }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AuthContext": {
        "type": "object",
        "description": "Complete authentication context for the current user",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/AuthUser"
          },
          "permissions": {
            "type": "array",
            "items": { "type": "string" },
            "description": "List of permission codes the user has"
          },
          "scope": {
            "$ref": "#/components/schemas/AuthScope"
          },
          "hierarchy": {
            "$ref": "#/components/schemas/AuthHierarchy"
          },
          "roles": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/RoleAssignment" },
            "description": "List of role assignments with scope details"
          }
        },
        "required": ["user", "permissions", "scope", "hierarchy", "roles"]
      },
      "AuthUser": {
        "type": "object",
        "description": "Basic user information",
        "properties": {
          "userId": { "type": "string", "format": "uuid" },
          "email": { "type": "string", "format": "email" },
          "firstName": { "type": "string" },
          "lastName": { "type": "string" }
        },
        "required": ["userId", "email", "firstName", "lastName"]
      },
      "AuthScope": {
        "type": "object",
        "description": "User's primary access scope",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["None", "Forum", "Area", "Unit", "Agent", "Member"],
            "description": "Scope level (None = Super Admin with global access)"
          },
          "entityId": {
            "type": ["string", "null"],
            "format": "uuid",
            "description": "ID of the scoped entity (null for None scope)"
          }
        },
        "required": ["type", "entityId"]
      },
      "AuthHierarchy": {
        "type": "object",
        "description": "User's position in the organizational hierarchy",
        "properties": {
          "forumId": { "type": ["string", "null"], "format": "uuid" },
          "areaId": { "type": ["string", "null"], "format": "uuid" },
          "unitId": { "type": ["string", "null"], "format": "uuid" },
          "agentId": { "type": ["string", "null"], "format": "uuid" },
          "memberId": { "type": ["string", "null"], "format": "uuid" }
        },
        "required": ["forumId", "areaId", "unitId", "agentId", "memberId"]
      },
      "RoleAssignment": {
        "type": "object",
        "description": "Role assignment with scope details",
        "properties": {
          "roleCode": { "type": "string", "description": "Unique role code (e.g., forum_admin, unit_admin)" },
          "roleName": { "type": "string", "description": "Display name of the role" },
          "scopeType": {
            "type": "string",
            "enum": ["None", "Forum", "Area", "Unit", "Agent", "Member"],
            "description": "Type of scope this role has"
          },
          "scopeEntityId": {
            "type": ["string", "null"],
            "format": "uuid",
            "description": "ID of the entity this role is scoped to"
          },
          "scopeEntityName": {
            "type": ["string", "null"],
            "description": "Name of the scoped entity (e.g., forum name, unit name)"
          }
        },
        "required": ["roleCode", "roleName", "scopeType", "scopeEntityId", "scopeEntityName"]
      },
      "AccessCheckResult": {
        "type": "object",
        "description": "Result of an access check operation",
        "properties": {
          "allowed": {
            "type": "boolean",
            "description": "Whether access is allowed"
          },
          "reason": {
            "type": "string",
            "description": "Reason for denial (only present when allowed is false)"
          }
        },
        "required": ["allowed"]
      },
      "UserRoleResponse": {
        "type": "object",
        "description": "User role assignment response",
        "properties": {
          "userRoleId": { "type": "string", "format": "uuid", "description": "Unique ID of the user role assignment" },
          "userId": { "type": "string", "format": "uuid", "description": "User ID" },
          "roleId": { "type": "string", "format": "uuid", "description": "Role ID" },
          "scopeEntityType": { 
            "type": ["string", "null"], 
            "enum": ["None", "Forum", "Area", "Unit", "Agent", null],
            "description": "Type of entity this role is scoped to" 
          },
          "scopeEntityId": { 
            "type": ["string", "null"], 
            "format": "uuid",
            "description": "ID of the forum/area/unit/agent entity" 
          },
          "isActive": { "type": "boolean", "description": "Whether the role assignment is active" },
          "assignedAt": { "type": "string", "format": "date-time", "description": "When the role was assigned" },
          "assignedBy": { "type": ["string", "null"], "format": "uuid", "description": "User ID who assigned the role" },
          "revokedAt": { "type": ["string", "null"], "format": "date-time", "description": "When the role was revoked (null if still active)" },
          "revokedBy": { "type": ["string", "null"], "format": "uuid", "description": "User ID who revoked the role (null if still active)" },
          "role": {
            "type": "object",
            "nullable": true,
            "description": "Role details (optional, included when eager loaded)",
            "properties": {
              "roleId": { "type": "string", "format": "uuid" },
              "roleCode": { "type": "string" },
              "roleName": { "type": "string" },
              "scopeType": { "type": "string", "enum": ["None", "Forum", "Area", "Unit", "Agent"] }
            }
          }
        }
      },
      "UserWithRolesResponse": {
        "type": "object",
        "description": "User details with all assigned roles",
        "properties": {
          "userId": { "type": "string", "format": "uuid" },
          "externalAuthId": { "type": "string", "description": "External authentication provider user ID" },
          "email": { "type": "string", "format": "email" },
          "firstName": { "type": ["string", "null"] },
          "lastName": { "type": ["string", "null"] },
          "isActive": { "type": "boolean" },
          "createdAt": { "type": "string", "format": "date-time" },
          "lastSyncedAt": { "type": ["string", "null"], "format": "date-time" },
          "roles": {
            "type": "array",
            "description": "List of all active role assignments for this user",
            "items": {
              "type": "object",
              "properties": {
                "userRoleId": { "type": "string", "format": "uuid" },
                "roleId": { "type": "string", "format": "uuid" },
                "roleCode": { "type": "string", "description": "Role code (e.g., forum_admin, unit_admin)" },
                "roleName": { "type": "string", "description": "Display name of the role" },
                "scopeType": { "type": "string", "enum": ["None", "Forum", "Area", "Unit", "Agent"], "description": "Type of scope this role has" },
                "scopeEntityType": { "type": ["string", "null"], "enum": ["None", "Forum", "Area", "Unit", "Agent", null], "description": "Specific entity type this assignment is scoped to" },
                "scopeEntityId": { "type": ["string", "null"], "format": "uuid", "description": "ID of the scoped entity" },
                "scopeEntityName": { "type": ["string", "null"], "description": "Name of the scoped entity (e.g., forum name, unit name)" },
                "isSystemRole": { "type": "boolean", "description": "Whether this is a built-in system role" },
                "isActive": { "type": "boolean" },
                "assignedAt": { "type": "string", "format": "date-time" },
                "assignedBy": {
                  "type": ["object", "null"],
                  "description": "User who assigned this role",
                  "properties": {
                    "userId": { "type": "string", "format": "uuid" },
                    "name": { "type": "string", "description": "Full name or email of the user who assigned the role" }
                  }
                }
              }
            }
          }
        }
      },
      "SearchRequest": {
        "type": "object",
        "description": "Advanced search request with filters, sorting, and pagination. Supports multiple filter operators and eager loading of relations.",
        "properties": {
          "searchTerm": {
            "type": "string",
            "description": "Global search term to search across specified searchFields"
          },
          "searchFields": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Fields to search in when searchTerm is provided (e.g., ['firstName', 'lastName', 'email'])"
          },
          "filters": {
            "type": "array",
            "description": "Array of filter conditions to apply",
            "items": {
              "type": "object",
              "required": ["field", "operator", "value"],
              "properties": {
                "field": { "type": "string", "description": "Field name to filter on" },
                "operator": {
                  "type": "string",
                  "enum": ["equals", "notEquals", "contains", "in", "notIn", "gte", "lte", "gt", "lt", "between", "isNull", "isNotNull"],
                  "description": "Filter operator"
                },
                "value": {
                  "oneOf": [
                    { "type": "string" },
                    { "type": "number" },
                    { "type": "boolean" },
                    { "type": "array", "items": {} },
                    { "type": "object", "properties": { "from": {}, "to": {} } }
                  ],
                  "description": "Filter value (type depends on operator)"
                },
                "negate": { "type": "boolean", "description": "Negate the filter condition" }
              }
            }
          },
          "sortBy": {
            "oneOf": [
              { "type": "string" },
              { "type": "array", "items": { "type": "string" } }
            ],
            "description": "Field(s) to sort by"
          },
          "sortOrder": {
            "oneOf": [
              { "type": "string", "enum": ["asc", "desc"] },
              { "type": "object", "additionalProperties": { "type": "string", "enum": ["asc", "desc"] } }
            ],
            "description": "Sort order - single or per-field"
          },
          "page": { "type": "integer", "minimum": 1, "description": "Page number (starts at 1)" },
          "pageSize": { "type": "integer", "minimum": 1, "maximum": 100, "description": "Items per page (max 100)" },
          "eagerLoad": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Relations to eager load (e.g., ['unit', 'agent'])"
          }
        }
      },
      "SearchResponse": {
        "type": "object",
        "description": "Paginated search result",
        "properties": {
          "items": { "type": "array", "items": {}, "description": "Array of result items" },
          "total": { "type": "integer", "description": "Total count of matching items" },
          "page": { "type": "integer", "description": "Current page number" },
          "pageSize": { "type": "integer", "description": "Items per page" },
          "totalPages": { "type": "integer", "description": "Total number of pages" }
        }
      },
      "MembershipTier": {
        "type": "object",
        "description": "Membership tier configuration with fees and benefits",
        "properties": {
          "tierId": { "type": "string", "format": "uuid", "description": "Unique tier identifier" },
          "tierCode": { "type": "string", "description": "Unique tier code" },
          "tierName": { "type": "string", "description": "Display name of the tier" },
          "description": { "type": "string", "nullable": true, "description": "Tier description" },
          "registrationFee": { "type": "number", "format": "decimal", "description": "One-time registration fee" },
          "advanceDepositAmount": { "type": "number", "format": "decimal", "description": "Advance deposit amount" },
          "contributionAmount": { "type": "number", "format": "decimal", "description": "Monthly contribution amount" },
          "deathBenefitAmount": { "type": "number", "format": "decimal", "description": "Death benefit payout amount" },
          "isActive": { "type": "boolean", "description": "Whether tier is currently active" },
          "isDefault": { "type": "boolean", "description": "Whether this is the default tier" },
          "createdAt": { "type": "string", "format": "date-time", "description": "Tier creation timestamp" },
          "createdBy": { "type": "string", "description": "User who created the tier" },
          "updatedAt": { "type": "string", "format": "date-time", "nullable": true, "description": "Last update timestamp" },
          "updatedBy": { "type": "string", "nullable": true, "description": "User who last updated the tier" }
        }
      },
      "Wallet": {
        "type": "object",
        "description": "Member wallet with balance information",
        "properties": {
          "walletId": { "type": "string", "format": "uuid" },
          "memberId": { "type": "string", "format": "uuid" },
          "currentBalance": { "type": "number", "format": "decimal" },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time", "nullable": true }
        }
      },
      "WalletWithMember": {
        "allOf": [
          { "$ref": "#/components/schemas/Wallet" },
          {
            "type": "object",
            "properties": {
              "member": {
                "type": "object",
                "properties": {
                  "memberId": { "type": "string" },
                  "memberCode": { "type": "string" },
                  "firstName": { "type": "string" },
                  "lastName": { "type": "string" }
                }
              }
            }
          }
        ]
      },
      "WalletTransaction": {
        "type": "object",
        "description": "Wallet transaction record",
        "properties": {
          "transactionId": { "type": "string", "format": "uuid" },
          "walletId": { "type": "string", "format": "uuid" },
          "transactionType": { "type": "string", "enum": ["Deposit", "Debit", "Refund", "Adjustment"] },
          "amount": { "type": "number", "format": "decimal" },
          "balanceAfter": { "type": "number", "format": "decimal" },
          "sourceModule": { "type": "string" },
          "sourceEntityId": { "type": "string", "format": "uuid", "nullable": true },
          "description": { "type": "string" },
          "journalEntryId": { "type": "string", "format": "uuid", "nullable": true },
          "status": { "type": "string", "enum": ["Pending", "Completed", "Failed", "Reversed"] },
          "createdBy": { "type": "string" },
          "createdAt": { "type": "string", "format": "date-time" }
        }
      },
      "WalletSummary": {
        "type": "object",
        "description": "Wallet summary with recent transactions",
        "properties": {
          "walletId": { "type": "string", "format": "uuid" },
          "memberId": { "type": "string", "format": "uuid" },
          "currentBalance": { "type": "number", "format": "decimal" },
          "recentTransactions": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/WalletTransaction" }
          }
        }
      },
      "WalletStatistics": {
        "type": "object",
        "description": "Aggregate wallet statistics",
        "properties": {
          "totalWallets": { "type": "integer" },
          "totalBalance": { "type": "number", "format": "decimal" },
          "averageBalance": { "type": "number", "format": "decimal" },
          "lowBalanceCount": { "type": "integer" }
        }
      },
      "WalletDepositRequest": {
        "type": "object",
        "description": "Deposit request for a wallet",
        "properties": {
          "depositRequestId": { "type": "string", "format": "uuid" },
          "memberId": { "type": "string", "format": "uuid" },
          "walletId": { "type": "string", "format": "uuid" },
          "amount": { "type": "number", "format": "decimal" },
          "collectionDate": { "type": "string", "format": "date-time" },
          "collectedBy": { "type": "string" },
          "notes": { "type": "string", "nullable": true },
          "requestStatus": { "type": "string", "enum": ["Draft", "PendingApproval", "Approved", "Rejected"] },
          "approvalRequestId": { "type": "string", "format": "uuid", "nullable": true },
          "journalEntryId": { "type": "string", "format": "uuid", "nullable": true },
          "createdAt": { "type": "string", "format": "date-time" },
          "approvedAt": { "type": "string", "format": "date-time", "nullable": true },
          "rejectedAt": { "type": "string", "format": "date-time", "nullable": true }
        }
      },
      "WalletDebitRequest": {
        "type": "object",
        "description": "Debit request for a wallet. When isAutoDebit is true, the debit was processed automatically without agent acknowledgment.",
        "properties": {
          "debitRequestId": { "type": "string", "format": "uuid" },
          "memberId": { "type": "string", "format": "uuid" },
          "walletId": { "type": "string", "format": "uuid" },
          "amount": { "type": "number", "format": "decimal" },
          "purpose": { "type": "string" },
          "contributionCycleId": { "type": "string", "format": "uuid", "nullable": true },
          "contributionId": { "type": "string", "format": "uuid", "nullable": true },
          "status": { "type": "string", "enum": ["PendingAcknowledgment", "Acknowledged", "Completed", "Invalidated", "Failed"], "description": "Note: PendingAcknowledgment and Acknowledged are deprecated when auto-debit is enabled" },
          "isAutoDebit": { "type": "boolean", "default": false, "description": "Indicates if this debit was processed automatically without agent acknowledgment" },
          "createdAt": { "type": "string", "format": "date-time" },
          "acknowledgedAt": { "type": "string", "format": "date-time", "nullable": true, "description": "Deprecated: Not set when isAutoDebit=true" },
          "completedAt": { "type": "string", "format": "date-time", "nullable": true }
        }
      },
      "AgentProfile": {
        "type": "object",
        "description": "Agent profile with hierarchy details",
        "properties": {
          "agentId": { "type": "string", "format": "uuid" },
          "agentCode": { "type": "string" },
          "registrationStatus": { "type": "string", "enum": ["Draft", "PendingApproval", "Approved", "Rejected"] },
          "agentStatus": { "type": "string", "enum": ["Active", "Inactive", "Suspended", "Terminated"] },
          "firstName": { "type": "string" },
          "middleName": { "type": "string", "nullable": true },
          "lastName": { "type": "string" },
          "dateOfBirth": { "type": "string", "format": "date-time" },
          "gender": { "type": "string", "enum": ["Male", "Female", "Other"] },
          "contactNumber": { "type": "string" },
          "alternateContactNumber": { "type": "string", "nullable": true },
          "email": { "type": "string", "format": "email" },
          "addressLine1": { "type": "string", "nullable": true },
          "addressLine2": { "type": "string", "nullable": true },
          "city": { "type": "string", "nullable": true },
          "state": { "type": "string", "nullable": true },
          "postalCode": { "type": "string", "nullable": true },
          "country": { "type": "string", "nullable": true },
          "totalActiveMembers": { "type": "integer" },
          "totalRegistrations": { "type": "integer" },
          "joinedDate": { "type": "string", "format": "date-time", "nullable": true },
          "terminatedDate": { "type": "string", "format": "date-time", "nullable": true },
          "terminationReason": { "type": "string", "nullable": true },
          "createdAt": { "type": "string", "format": "date-time" },
          "unit": {
            "type": "object",
            "nullable": true,
            "properties": {
              "unitId": { "type": "string", "format": "uuid" },
              "unitCode": { "type": "string" },
              "unitName": { "type": "string" }
            }
          },
          "area": {
            "type": "object",
            "nullable": true,
            "properties": {
              "areaId": { "type": "string", "format": "uuid" },
              "areaCode": { "type": "string" },
              "areaName": { "type": "string" }
            }
          },
          "forum": {
            "type": "object",
            "nullable": true,
            "properties": {
              "forumId": { "type": "string", "format": "uuid" },
              "forumCode": { "type": "string" },
              "forumName": { "type": "string" }
            }
          }
        }
      },
      "AgentStats": {
        "type": "object",
        "description": "Agent dashboard statistics",
        "properties": {
          "totalMembers": { "type": "integer", "description": "Total approved members" },
          "activeMembers": { "type": "integer", "description": "Active members" },
          "suspendedMembers": { "type": "integer", "description": "Suspended members" },
          "frozenMembers": { "type": "integer", "description": "Frozen members" },
          "closedMembers": { "type": "integer", "description": "Closed members" },
          "pendingApprovals": { "type": "integer", "description": "Pending approval requests" },
          "newMembersThisMonth": { "type": "integer", "description": "New members registered this month" }
        }
      },
      "AgentMember": {
        "type": "object",
        "description": "Member under an agent",
        "properties": {
          "memberId": { "type": "string", "format": "uuid" },
          "memberCode": { "type": "string" },
          "firstName": { "type": "string" },
          "lastName": { "type": "string" },
          "contactNumber": { "type": "string" },
          "email": { "type": "string", "nullable": true },
          "memberStatus": { "type": "string", "nullable": true, "enum": ["Active", "Suspended", "Frozen", "Closed", "Deceased"] },
          "registrationStatus": { "type": "string" },
          "tier": {
            "type": "object",
            "properties": {
              "tierId": { "type": "string", "format": "uuid" },
              "tierCode": { "type": "string" },
              "tierName": { "type": "string" }
            }
          },
          "createdAt": { "type": "string", "format": "date-time" },
          "registeredAt": { "type": "string", "format": "date-time", "nullable": true }
        }
      },
      "AgentMembersResponse": {
        "type": "object",
        "description": "Paginated list of members under an agent",
        "properties": {
          "members": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/AgentMember" }
          },
          "total": { "type": "integer" },
          "page": { "type": "integer" },
          "limit": { "type": "integer" }
        }
      },
      "AgentPerformance": {
        "type": "object",
        "description": "Agent performance metrics with trends",
        "properties": {
          "period": { "type": "string", "description": "Period label (e.g., 'January 2025')" },
          "memberAcquisition": {
            "type": "object",
            "properties": {
              "newMembersThisMonth": { "type": "integer" },
              "monthlyTrend": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "month": { "type": "string" },
                    "count": { "type": "integer" }
                  }
                }
              }
            }
          },
          "retention": {
            "type": "object",
            "properties": {
              "retentionRate": { "type": "integer", "description": "Percentage of active members" },
              "totalMembers": { "type": "integer" },
              "activeMembers": { "type": "integer" },
              "suspendedMembers": { "type": "integer" },
              "frozenMembers": { "type": "integer" },
              "closedMembers": { "type": "integer" },
              "retentionTrend": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "month": { "type": "string" },
                    "rate": { "type": "integer" }
                  }
                }
              }
            }
          }
        }
      },
      "AgentHierarchy": {
        "type": "object",
        "description": "Agent's organization hierarchy",
        "properties": {
          "unit": {
            "type": "object",
            "nullable": true,
            "properties": {
              "unitId": { "type": "string", "format": "uuid" },
              "unitCode": { "type": "string" },
              "unitName": { "type": "string" }
            }
          },
          "area": {
            "type": "object",
            "nullable": true,
            "properties": {
              "areaId": { "type": "string", "format": "uuid" },
              "areaCode": { "type": "string" },
              "areaName": { "type": "string" }
            }
          },
          "forum": {
            "type": "object",
            "nullable": true,
            "properties": {
              "forumId": { "type": "string", "format": "uuid" },
              "forumCode": { "type": "string" },
              "forumName": { "type": "string" }
            }
          }
        }
      },
      "DeathClaim": {
        "type": "object",
        "description": "Death claim entity",
        "properties": {
          "claimId": { "type": "string", "format": "uuid" },
          "claimNumber": { "type": "string", "description": "Format: DC-YYYY-NNNNN" },
          "claimStatus": {
            "type": "string",
            "enum": ["Reported", "UnderVerification", "Verified", "PendingApproval", "Approved", "Settled", "Rejected"]
          },
          "approvalRequestId": { "type": "string", "format": "uuid", "nullable": true },
          "memberId": { "type": "string", "format": "uuid" },
          "memberCode": { "type": "string" },
          "memberName": { "type": "string" },
          "tierId": { "type": "string", "format": "uuid" },
          "agentId": { "type": "string", "format": "uuid" },
          "unitId": { "type": "string", "format": "uuid" },
          "areaId": { "type": "string", "format": "uuid" },
          "forumId": { "type": "string", "format": "uuid" },
          "deathDate": { "type": "string", "format": "date" },
          "deathPlace": { "type": "string", "nullable": true },
          "causeOfDeath": { "type": "string", "nullable": true },
          "reportedBy": { "type": "string", "format": "uuid" },
          "reportedByRole": { "type": "string" },
          "reportedDate": { "type": "string", "format": "date-time" },
          "initialNotes": { "type": "string", "nullable": true },
          "nomineeId": { "type": "string", "format": "uuid" },
          "nomineeName": { "type": "string" },
          "nomineeRelation": { "type": "string" },
          "nomineeContactNumber": { "type": "string" },
          "nomineeAddress": { "type": "object" },
          "benefitAmount": { "type": "number", "nullable": true },
          "verificationStatus": {
            "type": "string",
            "enum": ["Pending", "InProgress", "Completed", "Rejected"]
          },
          "verifiedBy": { "type": "string", "format": "uuid", "nullable": true },
          "verifiedDate": { "type": "string", "format": "date-time", "nullable": true },
          "verificationNotes": { "type": "string", "nullable": true },
          "settlementStatus": {
            "type": "string",
            "enum": ["Pending", "Completed"]
          },
          "paymentMethod": {
            "type": "string",
            "enum": ["Cash", "BankTransfer", "Cheque"],
            "nullable": true
          },
          "paymentReference": { "type": "string", "nullable": true },
          "paymentDate": { "type": "string", "format": "date", "nullable": true },
          "paidBy": { "type": "string", "format": "uuid", "nullable": true },
          "nomineeAcknowledgment": { "type": "string", "nullable": true },
          "journalEntryId": { "type": "string", "format": "uuid", "nullable": true },
          "createdAt": { "type": "string", "format": "date-time" },
          "approvedAt": { "type": "string", "format": "date-time", "nullable": true },
          "settledAt": { "type": "string", "format": "date-time", "nullable": true },
          "updatedAt": { "type": "string", "format": "date-time", "nullable": true },
          "approvedBy": { "type": "string", "format": "uuid", "nullable": true },
          "rejectedBy": { "type": "string", "format": "uuid", "nullable": true },
          "rejectionReason": { "type": "string", "nullable": true }
        }
      },
      "DeathClaimDocument": {
        "type": "object",
        "description": "Death claim document entity",
        "properties": {
          "documentId": { "type": "string", "format": "uuid" },
          "claimId": { "type": "string", "format": "uuid" },
          "documentType": {
            "type": "string",
            "enum": ["DeathCertificate", "NewspaperClipping", "PoliceReport", "MedicalReport", "PostMortemReport", "Other"]
          },
          "documentName": { "type": "string" },
          "fileUrl": { "type": "string" },
          "fileSize": { "type": "integer" },
          "mimeType": { "type": "string" },
          "uploadedBy": { "type": "string", "format": "uuid" },
          "uploadedAt": { "type": "string", "format": "date-time" },
          "verificationStatus": {
            "type": "string",
            "enum": ["Pending", "Verified", "Rejected"]
          },
          "verifiedBy": { "type": "string", "format": "uuid", "nullable": true },
          "verifiedAt": { "type": "string", "format": "date-time", "nullable": true },
          "rejectionReason": { "type": "string", "nullable": true }
        }
      },
      "ContributionCycle": {
        "type": "object",
        "description": "Contribution cycle entity",
        "properties": {
          "cycleId": { "type": "string", "format": "uuid" },
          "cycleNumber": { "type": "string", "description": "Format: CC-YYYY-NNNNN" },
          "cycleStatus": {
            "type": "string",
            "enum": ["Active", "Closed"]
          },
          "deathClaimId": { "type": "string", "format": "uuid" },
          "membershipTierId": { "type": "string", "format": "uuid" },
          "forumId": { "type": "string", "format": "uuid" },
          "contributionAmount": { "type": "number" },
          "totalMembers": { "type": "integer" },
          "totalCollected": { "type": "number" },
          "totalMissed": { "type": "number" },
          "collectedCount": { "type": "integer" },
          "missedCount": { "type": "integer" },
          "pendingCount": { "type": "integer" },
          "startDate": { "type": "string", "format": "date-time" },
          "endDate": { "type": "string", "format": "date-time", "nullable": true },
          "gracePeriodEnds": { "type": "string", "format": "date-time" },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "MemberContribution": {
        "type": "object",
        "description": "Member contribution entity",
        "properties": {
          "contributionId": { "type": "string", "format": "uuid" },
          "cycleId": { "type": "string", "format": "uuid" },
          "memberId": { "type": "string", "format": "uuid" },
          "agentId": { "type": "string", "format": "uuid" },
          "contributionAmount": { "type": "number" },
          "contributionStatus": {
            "type": "string",
            "enum": ["Pending", "WalletDebitRequested", "Acknowledged", "Collected", "Missed", "Exempted"]
          },
          "paymentMethod": {
            "type": "string",
            "enum": ["WalletDebit", "DirectCash"],
            "nullable": true
          },
          "walletDebitRequestId": { "type": "string", "format": "uuid", "nullable": true },
          "cashReceiptReference": { "type": "string", "nullable": true },
          "journalEntryId": { "type": "string", "format": "uuid", "nullable": true },
          "collectedAt": { "type": "string", "format": "date-time", "nullable": true },
          "missedAt": { "type": "string", "format": "date-time", "nullable": true },
          "exemptionReason": { "type": "string", "nullable": true },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "ActiveCyclesSummary": {
        "type": "object",
        "description": "Summary statistics for active contribution cycles (admin dashboard)",
        "properties": {
          "activeCyclesCount": { "type": "integer", "description": "Number of currently active cycles" },
          "totalCollecting": { "type": "number", "description": "Total amount already collected across all active cycles" },
          "totalExpected": { "type": "number", "description": "Total expected amount across all active cycles" },
          "avgCompletionPercentage": { "type": "number", "description": "Average completion percentage across all active cycles" }
        }
      },
      "MyContributionsSummary": {
        "type": "object",
        "description": "Contribution summary for authenticated member",
        "properties": {
          "memberId": { "type": "string", "format": "uuid" },
          "memberCode": { "type": "string", "description": "Member's code (e.g., MEM-2025-00456)" },
          "totalContributed": { "type": "number", "description": "Total amount contributed historically" },
          "thisYear": { "type": "number", "description": "Amount contributed this year" },
          "pendingCount": { "type": "integer", "description": "Number of pending contributions" },
          "averagePerMonth": { "type": "number", "description": "Average contribution per month" },
          "walletBalance": { "type": "number", "description": "Current wallet balance" }
        }
      },
      "MyPendingContribution": {
        "type": "object",
        "description": "Pending contribution with full details for member view",
        "properties": {
          "contributionId": { "type": "string", "format": "uuid" },
          "cycleCode": { "type": "string", "description": "Contribution cycle code (e.g., CC-2025-00015)" },
          "claimId": { "type": "string", "format": "uuid" },
          "deceasedMember": {
            "type": "object",
            "properties": {
              "memberId": { "type": "string", "format": "uuid" },
              "memberCode": { "type": "string" },
              "fullName": { "type": "string" }
            }
          },
          "tierName": { "type": "string", "description": "Tier name of deceased member (e.g., Tier A)" },
          "contributionAmount": { "type": "number" },
          "dueDate": { "type": "string", "format": "date-time" },
          "daysLeft": { "type": "integer", "description": "Days remaining until deadline (negative if overdue)" },
          "contributionStatus": { "type": "string" },
          "agent": {
            "type": "object",
            "nullable": true,
            "properties": {
              "agentId": { "type": "string", "format": "uuid" },
              "agentCode": { "type": "string" },
              "fullName": { "type": "string" },
              "contactNumber": { "type": "string" }
            }
          },
          "cycle": {
            "type": "object",
            "properties": {
              "cycleId": { "type": "string", "format": "uuid" },
              "cycleNumber": { "type": "string" },
              "claimNumber": { "type": "string" },
              "deceasedMemberName": { "type": "string" },
              "benefitAmount": { "type": "number" },
              "startDate": { "type": "string", "format": "date-time" },
              "collectionDeadline": { "type": "string", "format": "date-time" },
              "cycleStatus": { "type": "string" }
            }
          }
        }
      },
      "MemberContributionWithRelations": {
        "type": "object",
        "description": "Member contribution with cycle, member, and agent relations",
        "properties": {
          "contributionId": { "type": "string", "format": "uuid" },
          "cycleId": { "type": "string", "format": "uuid" },
          "memberId": { "type": "string", "format": "uuid" },
          "memberCode": { "type": "string" },
          "memberName": { "type": "string" },
          "tierId": { "type": "string", "format": "uuid" },
          "agentId": { "type": "string", "format": "uuid" },
          "expectedAmount": { "type": "number" },
          "contributionStatus": { "type": "string" },
          "paymentMethod": { "type": "string", "nullable": true },
          "collectionDate": { "type": "string", "format": "date-time", "nullable": true },
          "collectedBy": { "type": "string", "format": "uuid", "nullable": true },
          "walletDebitRequestId": { "type": "string", "format": "uuid", "nullable": true },
          "debitAcknowledgedAt": { "type": "string", "format": "date-time", "nullable": true },
          "cashReceiptReference": { "type": "string", "nullable": true },
          "journalEntryId": { "type": "string", "format": "uuid", "nullable": true },
          "isConsecutiveMiss": { "type": "boolean" },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time", "nullable": true },
          "cycle": {
            "type": "object",
            "properties": {
              "cycleId": { "type": "string", "format": "uuid" },
              "cycleNumber": { "type": "string" },
              "deathClaimId": { "type": "string", "format": "uuid" },
              "claimNumber": { "type": "string" },
              "deceasedMemberId": { "type": "string", "format": "uuid" },
              "deceasedMemberName": { "type": "string" },
              "benefitAmount": { "type": "number" },
              "forumId": { "type": "string", "format": "uuid" },
              "startDate": { "type": "string", "format": "date-time" },
              "collectionDeadline": { "type": "string", "format": "date-time" },
              "cycleStatus": { "type": "string" },
              "totalMembers": { "type": "integer" },
              "totalExpectedAmount": { "type": "number" },
              "totalCollectedAmount": { "type": "number" },
              "totalPendingAmount": { "type": "number" },
              "membersCollected": { "type": "integer" },
              "membersPending": { "type": "integer" },
              "membersMissed": { "type": "integer" }
            }
          },
          "member": {
            "type": "object",
            "properties": {
              "memberId": { "type": "string", "format": "uuid" },
              "memberCode": { "type": "string" },
              "firstName": { "type": "string" },
              "lastName": { "type": "string" },
              "agentId": { "type": "string", "format": "uuid" }
            }
          },
          "agent": {
            "type": "object",
            "properties": {
              "agentId": { "type": "string", "format": "uuid" },
              "agentCode": { "type": "string" },
              "firstName": { "type": "string" },
              "lastName": { "type": "string" }
            }
          }
        }
      },
      "CashCustody": {
        "type": "object",
        "description": "Cash custody record for a user",
        "properties": {
          "custodyId": { "type": "string", "format": "uuid" },
          "userId": { "type": "string", "format": "uuid" },
          "userRole": { 
            "type": "string", 
            "enum": ["Agent", "UnitAdmin", "AreaAdmin", "ForumAdmin"],
            "description": "Role of the user holding custody"
          },
          "glAccountCode": { 
            "type": "string",
            "description": "GL Account Code (1001=Agent, 1002=UnitAdmin, 1003=AreaAdmin, 1004=ForumAdmin)"
          },
          "currentBalance": { "type": "number", "format": "decimal", "description": "Current cash balance in custody" },
          "status": { 
            "type": "string", 
            "enum": ["Active", "Inactive", "Suspended"],
            "description": "Custody status"
          },
          "forumId": { "type": ["string", "null"], "format": "uuid" },
          "areaId": { "type": ["string", "null"], "format": "uuid" },
          "unitId": { "type": ["string", "null"], "format": "uuid" },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "CashCustodyWithRelations": {
        "type": "object",
        "description": "Cash custody record with related entities",
        "allOf": [
          { "$ref": "#/components/schemas/CashCustody" },
          {
            "type": "object",
            "properties": {
              "user": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string", "format": "uuid" },
                  "email": { "type": "string", "format": "email" },
                  "firstName": { "type": "string" },
                  "lastName": { "type": "string" }
                }
              },
              "forum": {
                "type": ["object", "null"],
                "properties": {
                  "forumId": { "type": "string", "format": "uuid" },
                  "forumName": { "type": "string" }
                }
              },
              "area": {
                "type": ["object", "null"],
                "properties": {
                  "areaId": { "type": "string", "format": "uuid" },
                  "areaName": { "type": "string" }
                }
              },
              "unit": {
                "type": ["object", "null"],
                "properties": {
                  "unitId": { "type": "string", "format": "uuid" },
                  "unitName": { "type": "string" }
                }
              }
            }
          }
        ]
      },
      "CashCustodySummary": {
        "type": "object",
        "description": "Aggregated summary for a GL account custody",
        "properties": {
          "glAccountCode": { "type": "string" },
          "totalBalance": { "type": "number", "format": "decimal" },
          "activeCustodies": { "type": "integer" },
          "custodies": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/CashCustodyWithRelations" }
          }
        }
      },
      "CashHandover": {
        "type": "object",
        "description": "Cash handover record",
        "properties": {
          "handoverId": { "type": "string", "format": "uuid" },
          "handoverNumber": { 
            "type": "string",
            "description": "Unique handover number (CHO-YYYY-NNNNN)"
          },
          "fromUserId": { "type": "string", "format": "uuid" },
          "fromUserRole": { 
            "type": "string", 
            "enum": ["Agent", "UnitAdmin", "AreaAdmin", "ForumAdmin"]
          },
          "toUserId": { "type": "string", "format": "uuid" },
          "toUserRole": { 
            "type": "string", 
            "enum": ["UnitAdmin", "AreaAdmin", "ForumAdmin", "SuperAdmin"]
          },
          "amount": { "type": "number", "format": "decimal" },
          "status": { 
            "type": "string", 
            "enum": ["Initiated", "Acknowledged", "Rejected", "Cancelled"]
          },
          "handoverType": { 
            "type": "string", 
            "enum": ["Normal", "AdminTransition"]
          },
          "requiresApproval": { "type": "boolean" },
          "forumId": { "type": ["string", "null"], "format": "uuid" },
          "areaId": { "type": ["string", "null"], "format": "uuid" },
          "unitId": { "type": ["string", "null"], "format": "uuid" },
          "initiatorNotes": { "type": ["string", "null"] },
          "receiverNotes": { "type": ["string", "null"] },
          "rejectionReason": { "type": ["string", "null"] },
          "journalEntryId": { "type": ["string", "null"], "format": "uuid" },
          "approvalRequestId": { "type": ["string", "null"], "format": "uuid" },
          "initiatedAt": { "type": "string", "format": "date-time" },
          "acknowledgedAt": { "type": ["string", "null"], "format": "date-time" },
          "rejectedAt": { "type": ["string", "null"], "format": "date-time" },
          "cancelledAt": { "type": ["string", "null"], "format": "date-time" }
        }
      },
      "CashHandoverWithRelations": {
        "type": "object",
        "description": "Cash handover record with related entities",
        "allOf": [
          { "$ref": "#/components/schemas/CashHandover" },
          {
            "type": "object",
            "properties": {
              "fromUser": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string", "format": "uuid" },
                  "email": { "type": "string", "format": "email" },
                  "firstName": { "type": "string" },
                  "lastName": { "type": "string" }
                }
              },
              "toUser": {
                "type": "object",
                "properties": {
                  "userId": { "type": "string", "format": "uuid" },
                  "email": { "type": "string", "format": "email" },
                  "firstName": { "type": "string" },
                  "lastName": { "type": "string" }
                }
              },
              "forum": {
                "type": ["object", "null"],
                "properties": {
                  "forumId": { "type": "string", "format": "uuid" },
                  "forumName": { "type": "string" }
                }
              },
              "area": {
                "type": ["object", "null"],
                "properties": {
                  "areaId": { "type": "string", "format": "uuid" },
                  "areaName": { "type": "string" }
                }
              },
              "unit": {
                "type": ["object", "null"],
                "properties": {
                  "unitId": { "type": "string", "format": "uuid" },
                  "unitName": { "type": "string" }
                }
              },
              "journalEntry": {
                "type": ["object", "null"],
                "properties": {
                  "entryId": { "type": "string", "format": "uuid" },
                  "entryNumber": { "type": "string" }
                }
              },
              "approvalRequest": {
                "type": ["object", "null"],
                "properties": {
                  "requestId": { "type": "string", "format": "uuid" },
                  "requestNumber": { "type": "string" },
                  "status": { "type": "string" }
                }
              }
            }
          }
        ]
      },
      "InitiateHandoverRequest": {
        "type": "object",
        "description": "Request body for initiating a cash handover",
        "required": ["toUserId", "toUserRole", "amount"],
        "properties": {
          "toUserId": { 
            "type": "string", 
            "format": "uuid",
            "description": "User ID of the receiver"
          },
          "toUserRole": { 
            "type": "string", 
            "enum": ["UnitAdmin", "AreaAdmin", "ForumAdmin", "SuperAdmin"],
            "description": "Role of the receiver"
          },
          "amount": { 
            "type": "number",
            "minimum": 0.01,
            "description": "Amount to handover"
          },
          "initiatorNotes": { 
            "type": "string",
            "maxLength": 500,
            "description": "Optional notes from initiator"
          },
          "handoverType": { 
            "type": "string", 
            "enum": ["Normal", "AdminTransition"],
            "default": "Normal",
            "description": "Type of handover"
          },
          "sourceHandoverId": { 
            "type": "string",
            "format": "uuid",
            "description": "Source handover ID for cascade handovers (admin transition)"
          }
        }
      },
      "ValidReceiver": {
        "type": "object",
        "description": "Valid receiver for cash handover",
        "properties": {
          "userId": { "type": "string", "format": "uuid" },
          "email": { "type": "string", "format": "email" },
          "firstName": { "type": "string" },
          "lastName": { "type": "string" },
          "roleCode": { "type": "string" },
          "roleName": { "type": "string" },
          "scopeEntityId": { "type": ["string", "null"], "format": "uuid" },
          "scopeEntityName": { "type": ["string", "null"] }
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token obtained from login. In Postman, set variable: authToken={{token}}"
      }
    }
  }
}
